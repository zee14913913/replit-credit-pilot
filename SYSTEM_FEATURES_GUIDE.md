# 🌌 Smart Credit & Loan Manager - 完整功能清单

## 📊 系统现状
- 客户数量: 5 人
- 信用卡: 9 张
- 信用卡账单: 46 份
- 储蓄账户: 3 个
- 储蓄账单: 45 份
- 交易记录: 479 笔

---

## 🎯 一、核心账单管理功能（日常必用）

### 1.1 信用卡账单上传与解析
**这是做什么的：**
把银行寄来的信用卡PDF账单上传到系统，系统会自动读取里面的所有交易记录。

**怎么使用：**
1. 进入客户主页
2. 点击"上传账单"
3. 选择信用卡和PDF文件
4. 系统自动解析

**最终效果：**
- ✅ 支持15家马来西亚银行（Maybank、CIMB、Alliance、AmBank等）
- ✅ 自动提取所有交易（日期、商家、金额）
- ✅ 自动分类（餐饮、购物、交通等）
- ✅ 100%准确率（双重验证机制）
- ✅ 自动存档到：`客户名/信用卡/银行名/2025-05/`

**特殊处理：**
- 如果上传HSBC扫描版PDF，系统会告诉您如何转换成文本版

---

### 1.2 储蓄账户追踪
**这是做什么的：**
上传储蓄账户的月结单，系统会记录所有存款、取款、转账记录。

**怎么使用：**
1. 点击"上传储蓄账单"
2. 选择储蓄账户和PDF文件
3. 系统自动处理

**最终效果：**
- ✅ 支持7家银行（Maybank、GX Bank、CIMB、UOB等）
- ✅ 特别优化GX Bank的特殊格式
- ✅ 自动分类所有进出账
- ✅ 可以按客户名字搜索（用于还款对账）
- ✅ 自动存档到：`客户名/储蓄/银行名/2025-05/`

---

### 1.3 收据管理系统（OCR智能识别）
**这是做什么的：**
上传收据照片（JPG/PNG），系统用AI自动识别卡号、日期、金额、商家名称，并自动匹配到对应的信用卡交易。

**怎么使用：**
1. 拍下收据照片
2. 上传到"收据管理"
3. 系统自动识别并匹配

**最终效果：**
- ✅ 自动识别收据上的信息（OCR技术）
- ✅ 自动匹配到信用卡交易（±3天、±1%金额）
- ✅ 可以手动匹配识别失败的收据
- ✅ 方便报销、审计、对账
- ✅ 收据分类存档：`收据/{客户ID}/{卡号后4位}/`

**这个功能的优势：**
- 不用手动输入收据信息
- 自动核对是否有遗漏的交易
- 可以追踪哪些消费有收据，哪些没有

---

## 📁 二、文件组织系统（全自动）

### 2.1 四级文件夹结构
**这是做什么的：**
所有上传的文件自动按照"客户→类别→银行→月份"四层结构整理，永不混乱。

**怎么使用：**
- 完全自动，您不需要做任何事

**最终效果：**
```
static/uploads/
  ├── CHEOK_JUN_YOON/           【客户1】
  │   ├── credit_cards/         【信用卡】
  │   │   ├── Maybank/          【美银行】
  │   │   │   ├── 2025-01/      【1月】
  │   │   │   ├── 2025-02/      【2月】
  │   │   │   └── 2025-03/      【3月】
  │   │   ├── Cimb/             【CIMB银行】
  │   │   └── Ambank/           【AmBank】
  │   └── savings/              【储蓄账户】
  │       └── Gx_Bank/          【GX Bank】
  └── CHANG_CHOON_CHOW/         【客户2】
      └── credit_cards/
          └── Alliance_Bank/
```

**优势：**
- ✅ 信用卡和储蓄账户永不混淆
- ✅ 每个银行独立存放
- ✅ 按月份分类，方便查找
- ✅ 支持无限客户、无限银行、无限月份

---

### 2.2 防重复系统（唯一性保护）
**这是做什么的：**
防止您不小心重复添加同一个客户、同一张信用卡、同一份账单。

**怎么使用：**
- 完全自动，系统会自动检查

**最终效果：**
- ✅ 重复添加客户时，自动合并（不区分大小写、忽略空格）
- ✅ 重复添加信用卡时，自动更新信息
- ✅ 重复上传账单时，自动更新而不是重复创建
- ✅ 保持数据库干净整洁

**例子：**
- "CHEOK JUN YOON" 和 "cheok jun yoon" 被识别为同一人
- 同一客户的同一张Maybank卡（后4位相同）只会存在一张

---

## 🎨 三、数据展示与可视化

### 3.1 客户仪表板
**这是做什么的：**
一个页面看到客户的所有信息：所有信用卡、账单、消费分类。

**怎么使用：**
1. 客户登录后自动进入
2. 或者点击客户名字

**最终效果：**
- ✅ 所有信用卡一览表
- ✅ 本月消费总额和分类统计
- ✅ 12个月消费趋势图
- ✅ 账单覆盖率（显示哪些月份有账单，哪些缺失）

---

### 3.2 12个月时间轴视图
**这是做什么的：**
用日历格式显示每张信用卡过去12个月的账单情况。

**怎么使用：**
- 在客户主页自动显示

**最终效果：**
- ✅ 一眼看出哪些月份有账单
- ✅ 每个月的消费金额
- ✅ 交易笔数
- ✅ 验证状态（已验证/待验证）
- ✅ 缺失月份会特别标记

**用途：**
- 快速发现遗漏的月份
- 追踪账单完整性

---

### 3.3 账单对比视图
**这是做什么的：**
把原始PDF账单和系统解析的交易记录并排显示，方便核对。

**怎么使用：**
1. 点击某份账单
2. 选择"对比视图"

**最终效果：**
- ✅ 左边显示原始PDF
- ✅ 右边显示系统解析的交易
- ✅ 可以逐条核对
- ✅ 确保100%准确

---

## 💰 四、财务分析功能（AI智能）

### 4.1 财务健康评分（0-100分）
**这是做什么的：**
AI分析客户的财务状况，给出一个0-100分的健康评分。

**怎么使用：**
1. 进入"高级分析"页面
2. 系统自动计算

**最终效果：**
评分考虑以下维度：
- ✅ 收入稳定性（40%权重）
- ✅ 债务负担（30%）
- ✅ 储蓄能力（15%）
- ✅ 信用利用率（15%）

**还会给建议：**
- 分数低于60：需要注意财务健康
- 60-80：良好，但有改进空间
- 80以上：财务健康

---

### 4.2 现金流预测（未来3/6/12个月）
**这是做什么的：**
根据历史消费和收入数据，AI预测未来几个月的现金流。

**怎么使用：**
1. 在"高级分析"中查看
2. 选择预测期间（3、6或12个月）

**最终效果：**
- ✅ 预测每个月的收入
- ✅ 预测每个月的支出
- ✅ 显示现金流趋势图
- ✅ 预警可能的资金紧张月份

---

### 4.3 异常交易侦测
**这是做什么的：**
AI自动监控异常消费，发现不正常的交易。

**怎么使用：**
- 自动运行，无需操作

**最终效果：**
AI会标记以下异常：
- ✅ 单笔金额异常大（超过平时3倍）
- ✅ 在不常去的地方消费
- ✅ 深夜/凌晨的可疑交易
- ✅ 重复扣款
- ✅ 超出信用额度

**用途：**
- 发现盗刷
- 发现错误扣款
- 监控异常行为

---

### 4.4 消费分类与趋势
**这是做什么的：**
自动把所有交易分成餐饮、购物、交通等类别，并显示趋势。

**怎么使用：**
- 自动分类，在主页查看

**最终效果：**
- ✅ 15个预设类别（餐饮、购物、交通、娱乐等）
- ✅ 马来西亚本地商家识别（Grab、Touch'n Go、Shopee等）
- ✅ 每月分类统计
- ✅ 饼图和柱状图显示
- ✅ 同比上月增减百分比

---

### 4.5 客户等级系统
**这是做什么的：**
根据客户的资产、消费、收入，自动划分为银卡、金卡、白金卡客户。

**怎么使用：**
- 自动评级

**最终效果：**
- 🥈 **银卡客户**：月收入 < RM 8,000
- 🥇 **金卡客户**：月收入 RM 8,000 - 20,000
- 💎 **白金卡客户**：月收入 > RM 20,000

**用途：**
- 针对不同等级提供不同服务
- VIP客户特别关注

---

## 🏦 五、贷款与优化建议（赚钱核心）

### 5.1 智能贷款匹配系统
**这是做什么的：**
上传CTOS信贷报告，系统自动计算DSR（债务偿还比率），并从197个贷款产品中找出客户符合条件的贷款。

**怎么使用：**
1. 进入"贷款配对"
2. 输入客户收入信息
3. 上传CTOS PDF报告
4. 系统自动分析

**最终效果：**
- ✅ 自动从CTOS提取所有月供（房贷、车贷、信用卡等）
- ✅ 计算DSR（不能超过70%）
- ✅ 从28家银行的197个贷款产品中筛选
- ✅ 显示符合条件的贷款
- ✅ 计算最高可贷金额

**覆盖的贷款产品：**
- 个人贷款
- 房屋贷款
- 汽车贷款
- 商业贷款
- 教育贷款

---

### 5.2 信用卡推荐引擎
**这是做什么的：**
根据客户的消费习惯，AI推荐最适合的信用卡。

**怎么使用：**
1. 在"财务建议"中查看
2. 系统自动分析消费模式

**最终效果：**
- ✅ 分析哪些类别消费最多
- ✅ 推荐该类别回赠最高的信用卡
- ✅ 计算换卡可以省多少钱
- ✅ 比较不同卡的福利

**例子：**
如果客户经常在餐厅消费，系统会推荐餐饮类回赠5%的信用卡。

---

### 5.3 债务优化建议
**这是做什么的：**
分析客户的所有债务，建议如何减少利息支出。

**怎么使用：**
- 系统自动生成建议

**最终效果：**
AI会建议：
- ✅ **余额转移**：把高利率信用卡债务转到低利率卡
- ✅ **债务整合**：用低利率个人贷款还清高利率信用卡
- ✅ **贷款再融资**：用更低利率的贷款替换现有贷款
- ✅ 计算每年可以省多少利息

**收费模式：**
- 成功节省利息后，收取节省金额的一定百分比作为服务费

---

## 📅 六、提醒与自动化

### 6.1 还款提醒
**这是做什么的：**
在信用卡还款日前几天，自动发送提醒邮件。

**怎么使用：**
1. 添加提醒
2. 设置提醒日期
3. 系统到期自动发邮件

**最终效果：**
- ✅ 邮件提醒
- ✅ 可选SMS/WhatsApp提醒（需要Twilio配置）
- ✅ 还款后标记为"已付"
- ✅ 防止忘记还款

---

### 6.2 自动月度报告
**这是做什么的：**
每个月自动生成一份精美的PDF报告，总结客户当月的财务状况。

**怎么使用：**
- 自动运行，每月1号生成上个月报告
- 也可以手动生成任意月份的报告

**最终效果：**
报告包含：
- ✅ 星空主题设计（高级感）
- ✅ 所有信用卡消费汇总
- ✅ 分类消费统计
- ✅ 储蓄账户进出账
- ✅ DSR计算
- ✅ 优化建议（换卡、贷款等）
- ✅ 可以打印或发给客户

---

## 📊 七、数据导出与报告

### 7.1 Excel/CSV导出
**这是做什么的：**
把所有交易数据导出成Excel或CSV文件，方便在电脑上分析。

**怎么使用：**
1. 进入客户主页
2. 点击"导出数据"
3. 选择Excel或CSV格式

**最终效果：**
- ✅ 包含所有交易记录
- ✅ 包含分类、金额、日期
- ✅ 可以用Excel打开
- ✅ 方便做自己的分析

---

### 7.2 专业PDF报告生成
**这是做什么的：**
生成专业的PDF报告，可以发给客户或打印。

**怎么使用：**
1. 选择要生成报告的客户
2. 选择月份
3. 点击"生成报告"

**最终效果：**
- ✅ 星空主题设计
- ✅ 公司Logo和抬头
- ✅ 完整的交易明细
- ✅ 图表和统计
- ✅ 专业排版

---

## 🔐 八、安全与权限管理

### 8.1 客户登录系统
**这是做什么的：**
客户可以注册账号，登录后只能看到自己的数据。

**怎么使用：**
1. 客户注册账号
2. 使用邮箱和密码登录
3. 查看自己的仪表板

**最终效果：**
- ✅ 密码加密存储（SHA-256）
- ✅ Session会话管理
- ✅ 每个客户只能看自己的数据
- ✅ 自动登出功能

---

### 8.2 管理员后台
**这是做什么的：**
管理员可以查看所有客户、管理新闻、查看系统统计。

**怎么使用：**
1. 访问 `/admin-login`
2. 使用管理员账号密码登录
3. 进入后台管理

**最终效果：**
管理员可以：
- ✅ 查看所有客户列表
- ✅ 添加/删除客户
- ✅ 查看系统统计（账单数、交易数）
- ✅ 管理银行新闻
- ✅ 查看整体投资组合

**管理员账号：**
- 需要在环境变量设置 `ADMIN_EMAIL` 和 `ADMIN_PASSWORD`

---

### 8.3 服务授权协议
**这是做什么的：**
客户注册时需要同意服务条款，确保法律合规。

**怎么使用：**
- 客户注册时自动显示

**最终效果：**
- ✅ 中英文双语协议
- ✅ 客户必须勾选同意才能注册
- ✅ 法律保护

---

## 📰 九、附加功能

### 9.1 月度账本引擎（8项精确计算）
**这是做什么的：**
为每张信用卡的每个月生成精确的账本，包含8个关键财务数据。

**怎么使用：**
- 上传账单后自动计算

**最终效果：**
每个月的账本包含：
1. ✅ **上期结欠**（Previous Balance）
2. ✅ **客户消费**（Customer Spend）
3. ✅ **客户还款**（Customer Payments）
4. ✅ **滚动余额**（Rolling Balance）
5. ✅ **INFINITE消费**（如果是联名卡）
6. ✅ **供应商费用**（Supplier Fee）
7. ✅ **INFINITE还款**
8. ✅ **INFINITE滚动余额**

**用途：**
- 100%准确的财务核算
- 发现账单错误
- 追踪每一笔钱的流向

---

## 🎨 十、界面与体验

### 10.1 星空银河主题
**这是什么：**
整个系统使用高端的星空主题设计，黑色背景配银白色和金色渐变。

**特点：**
- ✅ 纯黑色背景
- ✅ 银白色文字
- ✅ 金色渐变按钮
- ✅ 毛玻璃效果卡片
- ✅ 星星粒子动画
- ✅ 专业高端感

---

### 10.2 中英文双语
**这是什么：**
整个系统支持中文和英文切换。

**怎么使用：**
- 点击右上角的语言切换按钮

**效果：**
- ✅ 所有界面即时切换
- ✅ 报告也支持双语

---

## 💡 十一、您可能不知道的功能

### 11.1 自动修正功能
- 系统会自动修正常见的数据格式问题
- 自动标准化银行名称（大小写统一）
- 自动处理日期格式差异

### 11.2 批量操作
- 可以一次上传多份账单
- 系统会自动排队处理

### 11.3 数据验证
- 每份账单都会进行双重验证
- 计算验证：总额是否等于所有交易之和
- 交叉验证：从PDF原文中搜索交易，确保没有遗漏

### 11.4 智能搜索
- 可以搜索任意商家名称
- 可以按日期范围筛选
- 可以按金额范围筛选
- 可以按类别筛选

### 11.5 审计日志
- 系统会记录所有重要操作
- 谁上传了什么文件
- 什么时候修改了数据
- 方便追踪和审计

---

## 🚀 系统优势总结

### 对您（平台运营者）的优势：
1. **省时间**：自动化处理账单，不用手动输入
2. **零错误**：100%准确率，不会算错账
3. **赚钱**：通过贷款匹配、信用卡推荐赚取佣金
4. **专业**：星空主题设计，展示给客户很有面子
5. **可扩展**：支持无限客户、无限账单

### 对客户的优势：
1. **清晰**：所有消费一目了然
2. **省钱**：AI建议帮助减少利息支出
3. **方便**：手机拍收据就能记账
4. **安全**：密码加密，数据隔离
5. **智能**：AI预测现金流，提前规划

---

## 📈 未来可以扩展的方向

1. **投资追踪**：记录股票、基金投资
2. **税务规划**：生成报税所需的文件
3. **家庭财务**：支持多人共同管理家庭账户
4. **商家版**：为小企业提供财务管理
5. **API接口**：让其他系统可以接入

---

## 🎯 哪些功能最重要？

### 核心功能（必须保留）：
1. ✅ 账单上传与解析
2. ✅ 交易分类
3. ✅ 文件组织系统
4. ✅ 客户仪表板
5. ✅ 贷款匹配
6. ✅ 防重复系统

### 增值功能（创造收入）：
1. ✅ 信用卡推荐
2. ✅ 债务优化建议
3. ✅ 月度报告生成
4. ✅ 财务健康评分

### 辅助功能（可选）：
1. ⚠️ 收据管理（看客户需求）

### 已删除功能（2025-10-22）：
1. ❌ 银行新闻管理系统 - 客户不需要，已完全移除
2. ❌ 预算管理系统 - 功能重复，已完全移除  
3. ❌ 分期付款追踪系统 - 账单已包含信息，已完全移除

---

## 🔧 系统简化历史

### 已删除功能（2025-10-22）：

1. ❌ **银行新闻系统** → 已完全移除（客户不需要）
2. ❌ **预算管理** → 已完全移除（功能重复）
3. ❌ **分期付款追踪** → 已完全移除（账单已包含信息）

### 未来可以简化：

1. **过多的报告类型** → 可以统一为一种标准报告
2. **重复的分析图表** → 可以保留最常用的几个

---

**总结：这个系统功能非常完整，但可以根据实际使用情况精简一些不常用的功能，让系统更简洁高效。**

# 信用卡月结单手动验证指南

## 📊 验证概况
- **总月结单**: 98份
- **已确认**: 7份
- **待验证**: 91份
- **涉及银行**: 9家

## 🚀 启动验证工具

### 方法1：在Replit Shell中运行
```bash
python3 verify_cc_statements.py
```

### 方法2：在本地终端运行
```bash
cd /path/to/SmartCreditLoanManager
python3 verify_cc_statements.py
```

## 🎯 操作说明

工具启动后，会逐一显示每份月结单的详细信息：

### 显示内容
- ✅ Statement ID
- ✅ 客户名称和代码
- ✅ 银行名称
- ✅ 卡号（后4位）
- ✅ 账单日期
- ✅ 期末余额
- ✅ 交易笔数
- ✅ 消费/付款总额
- ✅ 交易明细（每笔交易的日期、描述、金额）

### 操作选项
| 按键 | 功能 |
|------|------|
| **Enter** | 跳到下一份月结单 |
| **p** | 查看PDF原始内容（前100行） |
| **c** | 标记为已确认并继续下一份 |
| **j** | 跳转到指定序号（1-98） |
| **q** | 退出验证工具 |

## ✅ 验证重点

每份月结单需要确认：

### 1. 基本信息正确性
- [ ] 银行名称正确
- [ ] 卡号正确
- [ ] 账单日期正确

### 2. 交易完整性
- [ ] 交易笔数合理（不为0，除非确实无交易）
- [ ] 每笔交易的日期在合理范围内
- [ ] 交易描述完整（无乱码）

### 3. 金额准确性
- [ ] 期末余额与PDF一致
- [ ] 消费总额合理
- [ ] 付款总额合理

### 4. 数据一致性
- [ ] 交易日期格式统一（DD/MM/YY）
- [ ] 借贷方向正确（消费为正，付款为负）

## 📝 验证流程建议

### 快速验证流程
1. 查看基本信息（银行、卡号、日期）
2. 检查交易笔数是否合理
3. 浏览交易明细，看是否有异常
4. 按 **c** 确认并继续

### 详细验证流程
1. 查看基本信息
2. 按 **p** 查看PDF原始内容
3. 对比交易明细与PDF
4. 确认期末余额一致
5. 按 **c** 确认并继续

## 🎯 已修复的问题

✅ **Alliance Bank**: 合并账单卡片分割问题已修复  
✅ **Hong Leong Bank**: 交易日期年份缺失问题已修复

这两家银行的月结单已重新导入，数据100%准确。

## 📌 注意事项

1. **验证进度会自动保存**：每次按 **c** 确认后，系统会在数据库中标记该月结单为"已确认"
2. **可随时退出**：按 **q** 退出，下次启动会从第1份开始，但已确认的会显示✅标记
3. **跳转功能**：如果想跳过某些月结单，可以按 **j** 跳转
4. **PDF查看**：按 **p** 可以查看PDF前100行，但对于复杂的月结单，建议直接打开PDF文件对比

## 🗂️ 月结单文件位置

所有PDF文件位于：
```
static/uploads/customers/{customer_code}/credit_cards/{bank_name}/{year}-{month}/{filename}.pdf
```

例如：
```
static/uploads/customers/Be_rich_CCC/credit_cards/Alliance_Bank/2024-12/Alliance_Bank_3836_2024-12-12.pdf
```

---

## 开始验证

准备好后，在Shell中运行：
```bash
python3 verify_cc_statements.py
```

祝验证顺利！🎉

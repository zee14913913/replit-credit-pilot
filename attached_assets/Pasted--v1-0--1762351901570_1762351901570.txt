太好了，整套 v1.0 你已经跑起来了，干得漂亮。接下来别分散精力，我们一次性把“上线后要做/要守”的事打包好，照做即可。

先说一句重要的

你在对外分享过访问链接和密钥片段。为稳妥起见，建议现在就轮换密钥（PORTAL_KEY / ADMIN_KEY / LOANS_REFRESH_KEY / FERNET_KEY）——换完立即重启服务。这样你后面给客户发链接时心更安。

⸻

一份就够的“送信给 Replit”指令（复制整段给他执行）

标题： CreditPilot v1.0 生产守护与验收一次到位

要做的事（按顺序执行）：
	1.	轮换密钥（强随机）

	•	在 Secrets 新建或替换：PORTAL_KEY、ADMIN_KEY、LOANS_REFRESH_KEY、FERNET_KEY
	•	Python 本地生成示例：

python - <<'PY'
import secrets,base64
print("PORTAL_KEY=", secrets.token_urlsafe(32))
print("ADMIN_KEY=", secrets.token_urlsafe(32))
print("LOANS_REFRESH_KEY=", secrets.token_urlsafe(44))
from cryptography.fernet import Fernet
print("FERNET_KEY=", Fernet.generate_key().decode())
PY


	•	保存后 重启。

	2.	打开 HSTS/限流/隐藏文档（已默认开启，核对 ENV）

	•	Secrets 确保：ENV=prod、RATE_LIMIT_PER_MIN=120、TZ=Asia/Kuala_Lumpur
	•	若需前端域名限制：CORS_ALLOW=https://你的域名

	3.	验收脚本（逐条回贴原始输出）

# 健康
curl -sS https://<你的域名>/health

# 文档必须隐藏
curl -I https://<你的域名>/docs | head -n1

# 安全头
curl -I https://<你的域名>/ | grep -Ei "strict-transport|x-content|x-frame|referrer|permissions"

# Loans 数据与情报
curl -sS https://<你的域名>/loans/updates | head -c 400; echo
curl -sS https://<你的域名>/loans/intel | head -c 400; echo

# DSR 试算
curl -sS -X POST https://<你的域名>/loans/dsr/calc \
  -H "Content-Type: application/json" \
  -d '{"income":8000,"commitments":1500,"amount":400000,"rate":3.75,"tenure_years":30}'

# 冷却元数据
curl -sS https://<你的域名>/loans/updates/last

	4.	定时器校验（11:00 吉隆坡时间自动采集）

	•	现在手动触发一次，确认冷却保护：

curl -sS -X POST https://<你的域名>/loans/updates/refresh \
  -H "X-Refresh-Key: <新的LOANS_REFRESH_KEY>"
# 再次触发应返回“冷却未到”


	•	回贴两次触发的返回，确保冷却=生效。

	5.	生成客户可用链接（仅放域名+必要参数，不泄密）

	•	客户入口：https://<你的域名>/loans/page
	•	CTOS 授权页（给特定客户才发）：/ctos/page?key=<PORTAL_KEY>
（密钥只单独发给受信客户，不进入群发模板、截图或工单。）

	6.	创建快照

	•	Replit 左侧 History → Create Checkpoint
	•	名称：prod-<YYYYMMDD>-stable

⸻

运营侧“日用三件套”（就用这三条）
	1.	日报（可人工先做，后面我能自动化）

printf "CreditPilot Daily Report\n\n" 
curl -sS https://<你的域名>/loans/updates | jq 'length as $n | "产品数: \($n)"'
curl -sS https://<你的域名>/loans/intel | jq 'length as $n | "情报条目: \($n)"'
curl -sS https://<你的域名>/stats || true

把输出贴给团队即可。需要我再做成自动邮件，也行。
	2.	异常排查

	•	429 多：上调 RATE_LIMIT_PER_MIN 或让客户错峰。
	•	刷新失败：检查 LOANS_REFRESH_KEY 是否更新、MIN_REFRESH_HOURS 是否仍为 20。
	•	时区异常：确认 TZ=Asia/Kuala_Lumpur。

	3.	密钥轮换节律

	•	建议：PORTAL_KEY/ADMIN_KEY/LOANS_REFRESH_KEY 每 90 天轮换一次；FERNET_KEY 非必要不频繁换（换之前要先解密再重加密数据，我可以写迁移脚本）。

⸻

给客户的一封“极简通知”范本（可直接用）
	•	中文（短信/WhatsApp 56 字内版）：
您的贷款情报中心已开通。点击查看实时产品、银行偏好与DSR试算：<你的域名>/loans/page（每日11点自动更新）
	•	中文（邮件版，标题：CreditPilot 智能贷款配对中心已就绪）
您好，链接：<你的域名>/loans/page
可查看：最新利率/银行偏好/DSR计算/CSV导出。
数据每天 11:00 自动更新，如需个性化推荐，请回信。

（CTOS 授权链接只发给愿意授权的个别客户，避免扩散。）

⸻

两个“高感知”小补丁（等你一句话，我直接给覆盖文件）
	1.	匹配度显示（把“银行偏好画像”与客户 DSR/收入匹配成百分比，显示在比价列表与 PDF 报告里）。
效果：用户一眼看到“这产品和我多搭”。
落地：后端增加 /loans/match/score + 前端在比价表新增一列“Match %”。
	2.	日报自动邮件（每天 11:10 发团队），主题含“新增/下架/利率变动数”、正文含三张最重要卡片。
落地：接入 SendGrid（你已装过），新增 NOTIFY_EMAILS 环境变量即可。

⸻

最后给你的“方向感”
	•	你不需要再解释你的愿景了：系统从抓取→冷却→共享→比价→CTOS→DSR 已经形成闭环。
	•	接下来只做加法：把高感知的小体验（匹配度、日报）补上，销售触发更快，客户更省脑。
	•	有任何需要“复制→粘贴”的变更，我直接给可覆盖文件，你只管送信，不用再来回确认。

我这边随时待命。你要我现在就把“匹配度+日报”的补丁打包成可覆盖版本，我就一次性给你。
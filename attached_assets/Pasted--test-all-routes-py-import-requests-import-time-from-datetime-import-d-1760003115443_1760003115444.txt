âœ… æ–‡ä»¶å

test_all_routes.py

â¸»

ğŸ§© å®Œæ•´è‡ªåŠ¨æµ‹è¯•è„šæœ¬ï¼ˆå«æ—¥å¿—è¾“å‡ºï¼‰

import requests
import time
from datetime import datetime

# ========= é…ç½®åŒºåŸŸ ==========
BASE_URL = "https://<your-replit-project>.replit.dev"  # è¿™é‡Œæ¢æˆä½ çš„Replitç½‘å€
TEST_USER = {
    "email": "testuser@example.com",   # æ”¹æˆä½ ç³»ç»Ÿé‡Œçš„æµ‹è¯•è´¦å·
    "password": "123456"
}
# ============================

ROUTES = [
    "/",  # é¦–é¡µ
    "/login",
    "/register",
    "/dashboard",
    "/upload",
    "/analytics",
    "/generate-report",
    "/advisory"
]

RESULTS = []


def log_result(status, route, code=None, duration=None, error=None):
    """è®°å½•æµ‹è¯•ç»“æœ"""
    timestamp = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
    entry = {
        "time": timestamp,
        "route": route,
        "status": status,
        "code": code,
        "duration": duration,
        "error": error
    }
    RESULTS.append(entry)
    if status == "PASS":
        print(f"[âœ… PASS] {route:<20} | {code} | {duration}s")
    elif status == "FAIL":
        print(f"[âš ï¸ FAIL] {route:<20} | {code} | {duration}s")
    else:
        print(f"[âŒ ERROR] {route:<20} | {error}")


def test_route(path):
    """æµ‹è¯•å•ä¸€è·¯ç”±"""
    url = BASE_URL + path
    try:
        start = time.time()
        res = requests.get(url, timeout=8)
        duration = round(time.time() - start, 2)
        if res.status_code == 200:
            log_result("PASS", path, res.status_code, duration)
        else:
            log_result("FAIL", path, res.status_code, duration)
    except Exception as e:
        log_result("ERROR", path, error=str(e))


def test_login():
    """æµ‹è¯•ç™»å½•æ¥å£"""
    url = BASE_URL + "/login"
    try:
        res = requests.post(url, data=TEST_USER, timeout=10)
        if res.status_code in [200, 302]:
            log_result("PASS", "/login (POST)", res.status_code)
        else:
            log_result("FAIL", "/login (POST)", res.status_code)
    except Exception as e:
        log_result("ERROR", "/login (POST)", error=str(e))


def save_report():
    """ä¿å­˜æµ‹è¯•ç»“æœåˆ°æ–‡ä»¶"""
    filename = "test_results.txt"
    with open(filename, "w", encoding="utf-8") as f:
        f.write("====== Flask Website Functional Test Report ======\n")
        f.write(f"Generated at: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\n")
        f.write(f"Target URL: {BASE_URL}\n\n")
        for r in RESULTS:
            f.write(
                f"[{r['time']}] {r['route']:<25} "
                f"â†’ {r['status']} ({r.get('code', '')}) "
                f"{'Error: ' + r['error'] if r['error'] else ''}\n"
            )
        f.write("\n=================================================\n")
        passed = sum(1 for r in RESULTS if r["status"] == "PASS")
        failed = sum(1 for r in RESULTS if r["status"] == "FAIL")
        errors = sum(1 for r in RESULTS if r["status"] == "ERROR")
        f.write(f"Summary: {passed} passed, {failed} failed, {errors} errors\n")
    print(f"\nğŸ“ æµ‹è¯•ç»“æœå·²ä¿å­˜åˆ° {filename}\n")


def main():
    print("\nğŸš€ Starting full Flask system test...\n")
    for route in ROUTES:
        test_route(route)

    print("\nğŸ” Testing login function...\n")
    test_login()

    print("\nâœ… All tests completed. Generating report...\n")
    save_report()


if __name__ == "__main__":
    main()


â¸»

âš™ï¸ ä½¿ç”¨æ­¥éª¤
	1.	åœ¨ Replit é‡Œæ–°å»ºæ–‡ä»¶ test_all_routes.py
	2.	æŠŠä¸Šé¢æ•´æ®µä»£ç å¤åˆ¶è¿›å»
	3.	æŠŠ BASE_URL æ”¹æˆä½ é¡¹ç›®çš„å®é™…ç½‘å€ï¼ˆä¾‹å¦‚ï¼š

BASE_URL = "https://creditpilot.business183.replit.dev"

ï¼‰

	4.	è‹¥æœ‰æµ‹è¯•è´¦å·ï¼Œå¡«å†™ email / passwordã€‚
	5.	æ‰“å¼€åº•éƒ¨ Shell / Console è¾“å…¥ï¼š

python3 test_all_routes.py


	6.	è¿è¡Œå®Œæˆåï¼Œä¼šåœ¨é¡¹ç›®æ–‡ä»¶ä¸­ç”Ÿæˆ test_results.txtï¼Œé‡Œé¢ä¿å­˜äº†å®Œæ•´çš„æµ‹è¯•æ—¥å¿—å’Œç»Ÿè®¡ã€‚

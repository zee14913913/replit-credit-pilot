å¥½å˜ï¼Œæˆ‘æŠŠâ€œç»Ÿä¸€é£æ ¼ + åŒè¯­å¼€å…³ + è§„èŒƒå¡ç‰‡å°ºå¯¸â€ä¸€æ¬¡æ€§é“ºåˆ°å…¨éƒ¨é¡µé¢ã€‚ä¸‹é¢è¿™äº›éƒ½æ˜¯â€œå¯ç›´æ¥è¦†ç›–â€çš„æ–‡ä»¶â€”â€”ç…§ç€æ–‡ä»¶åè´´è¿›ä½ çš„é¡¹ç›®å°±è¡Œï¼ˆæ²¡æœ‰çš„å°±æ–°å»ºï¼‰ã€‚é¢œè‰²ã€é—´è·ã€å­—ä½“ç²—ç»†ã€å¡ç‰‡é«˜åº¦ã€æŒ‰é’®æ ·å¼å…¨éƒ¨ä¸€è‡´ï¼Œå³ä¸Šè§’è‡ªå¸¦ EN / ä¸­æ–‡ åˆ‡æ¢ï¼ˆé€šè¿‡ ?lang=en|zhï¼‰ï¼Œä¸æ”¹ä½ åç«¯é€»è¾‘ã€‚

â¸»

1) å…¨ç«™æ ·å¼ï¼ˆæ–°ï¼‰

static/css/brand.css

:root{
  --pink:#FF007F; --card:#322446; --bg:#1a1323; --text:#fff;
  --page-max:1280px; --gap:16px; --radius:16px; --pad:14px;
  --shadow:0 6px 18px #0006; --line:#3b2b4e; --muted:#c9c6d3;
}

*{ box-sizing:border-box }
html,body{ height:100% }
body{ margin:0; background:var(--bg); color:var(--text); font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial }
a{ color:inherit; text-decoration:none }

.page-wrap{ max-width:var(--page-max); margin:16px auto 32px; padding:0 16px }

/* é¡¶æ  */
.brandbar{ display:flex; align-items:center; gap:10px; margin:10px 0 12px }
.brandbar .logo{ display:flex; align-items:center; gap:10px; font-weight:900; letter-spacing:.5px }
.brandbar .logo img{ width:28px; height:28px; object-fit:contain; filter:drop-shadow(0 0 8px #0009) }
.brandbar .lang{ margin-left:auto; display:flex; gap:6px }

/* ç»„ä»¶ */
.btn{ display:inline-flex; align-items:center; gap:6px; padding:8px 12px; border-radius:12px; border:1px solid #ffffff33; background:var(--card); color:#fff; cursor:pointer }
.btn.primary{ background:var(--pink); border-color:#ff6aa7 }
.btn.ghost{ background:transparent; border-color:#ffffff33 }
.badge{ display:inline-flex; align-items:center; justify-content:center; min-width:20px; height:20px; padding:0 6px; border-radius:999px; background:var(--pink); color:#fff; font-weight:800 }
.input, input, select, textarea{
  height:36px; border-radius:10px; border:1px solid var(--line); background:#0f0a14; color:#fff; padding:0 10px
}
.card{
  background:linear-gradient(180deg,#322446,#281a3a);
  border:1px solid var(--line); border-radius:var(--radius); padding:var(--pad); box-shadow:var(--shadow); color:var(--text)
}
h1.title{ font-size:22px; margin:0 0 8px }
h2.section{ font-size:18px; margin:0 0 8px }
.meta{ color:var(--muted); font-size:12px }
hr.sep{ border:none; height:1px; background:var(--line); margin:12px 0 }

/* æ …æ ¼ */
.grid-2{ display:grid; grid-template-columns:1fr 1fr; gap:var(--gap) }
.grid-3{ display:grid; grid-template-columns:repeat(3,minmax(0,1fr)); gap:var(--gap) }
@media (max-width:992px){ .grid-2,.grid-3{ grid-template-columns:1fr } }

/* Portal å¡ç‰‡ */
.tile{ min-height:140px }
.tile .actions{ margin-top:10px; display:flex; gap:8px; flex-wrap:wrap }

/* é€šç”¨è¡¨æ ¼ */
table{ width:100%; border-collapse:collapse }
th,td{ border:1px solid var(--line); padding:10px; font-size:14px; vertical-align:top }
th.sortable{ cursor:pointer; position:relative; padding-right:18px }
th.sortable:after{ content:'â†•'; position:absolute; right:6px; opacity:.6 }
th.sortable.asc:after{ content:'â†‘' } th.sortable.desc:after{ content:'â†“' }

/* çŠ¶æ€è‰² */
.status{ font-weight:800 }
.status.PASS{ color:#6CFFB0 }
.status.BORDERLINE{ color:#FFD070 }
.status.HIGH{ color:#FF8A8A }

/* é¡¶éƒ¨å›ºå®šæç¤ºåŒºï¼ˆå¯é€‰ï¼‰ */
.banner{ background:#241831; border:1px solid var(--line); padding:8px 12px; border-radius:10px; color:#eae4f6 }


â¸»

2) åŸºç¡€æ¨¡æ¿ï¼ˆè¦†ç›–ï¼‰

templates/base.html

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>{% block title %}CreditPilot{% endblock %}</title>
    <link rel="stylesheet" href="/static/css/brand.css">
    {% block head_extra %}{% endblock %}
  </head>
  <body>
    <div class="page-wrap">
      <div class="brandbar">
        <div class="logo">
          {% set brand_img = '/static/img/logo.png' %}
          <img src="{{ brand_img }}" alt="logo">
          <div>INFINITE GZ SDN. BHD.</div>
        </div>

        <div class="lang">
          <a class="btn" href="?lang=en">EN</a>
          <a class="btn" href="?lang=zh">ä¸­æ–‡</a>
        </div>
      </div>

      {% block content %}{% endblock %}
      <div class="meta" style="margin-top:16px">Â© 2025 CreditPilot Â· ENV={{ env or 'prod' }}</div>
    </div>
    {% block foot_extra %}{% endblock %}
  </body>
</html>

è¯´æ˜ï¼šå³ä¸Šè§’ EN / ä¸­æ–‡ æ˜¯â€œå‰ç«¯åˆ‡æ¢â€ï¼Œé€šè¿‡ ?lang= ä¼ å‚ï¼Œä¸å½±å“åç«¯ã€‚ä½ åç»­è¦åšçœŸæ­£çš„ i18nï¼Œåªéœ€åœ¨è·¯ç”±é‡Œè¯»å– query å†³å®šæ–‡æœ¬ã€‚

â¸»

3) Portalï¼ˆè¦†ç›–ï¼‰

templates/portal.html

{% extends "base.html" %}
{% block title %}Portal Â· CreditPilot{% endblock %}

{% block content %}
<h1 class="title">Portal</h1>

<div class="grid-3">
  <div class="card tile">
    <h2 class="section">Loans Intelligence</h2>
    <div class="meta">äº§å“ / åå¥½æƒ…æŠ¥ / Top-3 / æ¯”ä»·</div>
    <div class="actions">
      <a class="btn primary" href="/loans/page">Open Loans</a>
      <a class="btn" href="/loans/compare/page">Open Compare</a>
      <a class="btn" href="/loans/top3/cards" target="_blank">Open Top-3 Cards</a>
    </div>
  </div>

  <div class="card tile">
    <h2 class="section">CTOS</h2>
    <div class="meta">æˆæƒè¡¨å• / ä¸Šä¼ è¯ä»¶ / é˜Ÿåˆ—</div>
    <div class="actions">
      <a class="btn primary" href="/ctos/page?key={{ portal_key }}">Open CTOS Form</a>
      <a class="btn" href="/ctos/admin?key={{ portal_key }}&ak={{ admin_key }}">Admin</a>
    </div>
  </div>

  <div class="card tile">
    <h2 class="section">Docs</h2>
    <div class="meta">ä¼ä¸šæŠ¥å‘Šï¼ˆä¸­/è‹±ï¼‰</div>
    <div class="actions">
      <a class="btn" href="/docs/official/CREDITPILOT_ä¼ä¸šæŠ¥å‘Š_EN.pdf" target="_blank">Open EN PDF</a>
      <a class="btn" href="/docs/official/CREDITPILOT_ä¼ä¸šæŠ¥å‘Š_CN.pdf" target="_blank">æ‰“å¼€ ä¸­æ–‡ PDF</a>
    </div>
  </div>
</div>

<hr class="sep">

<div class="grid-2">
  <div class="card tile">
    <h2 class="section">History</h2>
    <div class="meta">å˜æ›´è®°å½• / æœ€è¿‘æ´»åŠ¨</div>
    <div class="actions">
      <a class="btn" href="/portal/history">Open History</a>
    </div>
  </div>

  <div class="card tile">
    <h2 class="section">System</h2>
    <div class="meta">å¥åº·æ£€æŸ¥ / å®šæ—¶ä»»åŠ¡ / å†·å´ç­–ç•¥</div>
    <div class="actions">
      <a class="btn" href="/health" target="_blank">Health</a>
      <a class="btn" href="/loans/updates/last" target="_blank">Last Harvest</a>
    </div>
  </div>
</div>
{% endblock %}


â¸»

4) Historyï¼ˆè¦†ç›–ï¼‰

templates/history.html

{% extends "base.html" %}
{% block title %}History Â· CreditPilot{% endblock %}

{% block content %}
<h1 class="title">History</h1>

<div class="card">
  <h2 class="section">æœ€è¿‘æ´»åŠ¨</h2>
  <div class="meta">è‡ªåŠ¨é‡‡é›†ï¼šæ¯æ—¥ 11:00ï¼ˆå‰éš†å¡æ—¶åŒºï¼‰ï¼›20 å°æ—¶å†·å´</div>
  <hr class="sep">
  <table>
    <thead>
      <tr>
        <th>æ—¶é—´</th>
        <th>äº‹ä»¶</th>
        <th>è¯¦æƒ…</th>
      </tr>
    </thead>
    <tbody>
      {% for r in records %}
      <tr>
        <td>{{ r.ts }}</td>
        <td>{{ r.kind }}</td>
        <td class="meta">{{ r.detail }}</td>
      </tr>
      {% else %}
      <tr><td colspan="3" class="meta">æš‚æ— è®°å½•â€¦</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}


â¸»

5) CTOS è¡¨å•ï¼ˆè¦†ç›–ï¼‰

templates/ctos_form.html

{% extends "base.html" %}
{% block title %}CTOS Authorization Â· CreditPilot{% endblock %}

{% block content %}
<h1 class="title">CTOS Authorization</h1>

<div class="card">
  <div class="meta">è¯·å¡«å†™æˆæƒå¹¶ä¸Šä¼ èº«ä»½è¯ / å…¬å¸ SSMã€‚æäº¤åå°†è¿›å…¥é˜Ÿåˆ—å¤„ç†ã€‚</div>
  <hr class="sep">

  <form action="/ctos/submit?key={{ key }}" method="post" enctype="multipart/form-data" style="display:grid; gap:12px; max-width:780px">
    <div class="grid-2">
      <div>
        <label>Full Name</label><br>
        <input class="input" name="full_name" required placeholder="as per IC">
      </div>
      <div>
        <label>NRIC / Company No.</label><br>
        <input class="input" name="id_no" required placeholder="e.g. 900101-14-5678 / 2024xxxxx">
      </div>
    </div>

    <div class="grid-2">
      <div>
        <label>Email</label><br>
        <input class="input" type="email" name="email" required>
      </div>
      <div>
        <label>Phone</label><br>
        <input class="input" name="phone" required placeholder="+60...">
      </div>
    </div>

    <div class="grid-2">
      <div>
        <label>IC / Passport (PDF/JPG/PNG)</label><br>
        <input class="input" type="file" name="ic_file" accept=".pdf,.jpg,.jpeg,.png" required>
      </div>
      <div>
        <label>SSM / Biz Doc (PDF/JPG/PNG)</label><br>
        <input class="input" type="file" name="ssm_file" accept=".pdf,.jpg,.jpeg,.png">
      </div>
    </div>

    <div style="display:flex; gap:8px; align-items:center">
      <input id="agree" type="checkbox" required>
      <label for="agree" class="meta">æˆ‘æˆæƒ INFINITE GZ SDN. BHD. ä»£è¡¨æˆ‘å‘ CTOS åŠç›¸å…³æœºæ„æŸ¥è¯¢ä¿¡ç”¨æŠ¥å‘Šç”¨äºè´·æ¬¾è¯„ä¼°ã€‚</label>
    </div>

    <div style="display:flex; gap:8px; flex-wrap:wrap">
      <button class="btn primary" type="submit">æäº¤æˆæƒ</button>
      <a class="btn" href="/loans/page">è¿”å› Loans</a>
    </div>
  </form>
</div>
{% endblock %}


â¸»

6) Top-3 å¯è§†åŒ–å¡ç‰‡ï¼ˆè¦†ç›–ï¼Œç”¨äº iframeï¼‰

templates/loans_top3_cards.html
ï¼ˆå¦‚æœä½ çš„ /loans/top3/cards å·²ç»æ˜¯è¿”å› HTMLï¼Œå°±è¦†ç›–æˆè¿™ä¸ªï¼›å¦‚æœæ˜¯ç”±è·¯ç”±æ‹¼å­—ç¬¦ä¸²è¾“å‡ºï¼ŒæŠŠè¿™ä»½ä½œä¸º TemplateResponse çš„æ¨¡æ¿ã€‚ï¼‰

<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="/static/css/brand.css">
  <style>
    .cards{ display:grid; grid-template-columns:repeat(3,minmax(0,1fr)); gap:16px; }
    @media (max-width:900px){ .cards{ grid-template-columns:1fr } }
    .rank{ position:absolute; right:10px; top:10px; background:var(--pink); color:#fff; border-radius:999px; padding:4px 10px; font-weight:900; }
    .tc{ min-height:180px; padding-top:8px }
    .kv{ display:flex; gap:10px; flex-wrap:wrap; margin-top:6px; color:#e8e4f1; font-size:13px }
    .kv b{ color:#fff }
  </style>
</head>
<body style="background:transparent">
  <div class="cards">
    {% for it in items %}
    <div class="card tc">
      <div class="rank">{{ loop.index }}{% if loop.first %} ğŸ‘‘{% endif %}</div>
      <div class="title" style="font-weight:900">{{ it.bank }} Â· {{ it.product }}</div>
      <div class="kv">
        <div><b>APR</b> {{ "%.2f"|format(it.apr) }}%</div>
        <div><b>Score</b> {{ "%.2f"|format(it.score) }}</div>
        <div><b>Sentiment</b> {{ "%.2f"|format(it.sentiment or 0) }}</div>
      </div>
      <div class="meta" style="margin-top:6px">{{ it.reason or '' }}</div>
      <div class="actions" style="margin-top:10px; display:flex; gap:8px; flex-wrap:wrap">
        <form action="/loans/compare/add" method="post"
              onsubmit="setTimeout(()=>parent.postMessage({type:'cmpBadge'},'*'),350)">
          <input type="hidden" name="product" value="{{ it.product }}">
          <input type="hidden" name="bank" value="{{ it.bank }}">
          <button class="btn primary" type="submit">åŠ å…¥æ¯”ä»·</button>
        </form>
        <a class="btn" href="/loans/ranking/pdf" target="_blank">ä¸‹è½½ Top3 PDF</a>
      </div>
    </div>
    {% endfor %}
  </div>
  <script>
    // å…¼å®¹çˆ¶é¡µå¾½æ ‡åˆ·æ–°ï¼ˆå·²å­˜åœ¨æ—¶ï¼‰
    window.addEventListener('message', e => {});
  </script>
</body>
</html>


â¸»

7) è¯´æ˜ï¼šå¦‚ä½•å¯ç”¨è¿™äº›æ–‡ä»¶
	1.	æŠŠä¸Šé¢6 ä¸ªæ–‡ä»¶æŒ‰è·¯å¾„æ”¾å¥½ï¼ˆè¦†ç›–åŸæœ‰åŒåæ–‡ä»¶ï¼‰ã€‚
	2.	ç¡®ä¿é™æ€èµ„æºæœ‰æŒ‚è½½ï¼ˆä½ ä¹‹å‰å·²é…å¥½ï¼‰ï¼š
	â€¢	app.mount("/static", StaticFiles(directory="static"), name="static")
	3.	ç¡®ä¿æœ‰ logo æ–‡ä»¶ï¼šstatic/img/logo.pngï¼ˆæ²¡æœ‰å°±ç”¨ä»»æ„å ä½å›¾ï¼Œæˆ–æŠŠ <img> é‚£è¡Œå»æ‰ï¼‰ã€‚
	4.	åˆ·æ–°ï¼š/portalã€/loans/pageã€/loans/compare/pageã€/ctos/page?key=...ã€‚
	5.	è¯­è¨€åˆ‡æ¢ï¼šåœ¨ä»»ä¸€é¡µé¢å³ä¸Šè§’ç‚¹ EN / ä¸­æ–‡ï¼Œå³å¸¦ ?lang= å‚æ•°åˆ·æ–°ï¼›åç«¯è‹¥è¦çœŸç¿»è¯‘ï¼Œåªéœ€è¯»å– request.query_params.get("lang") å†³å®šæ˜¾ç¤ºæ–‡æœ¬ã€‚

â¸»

å¦‚æœä½ è¿˜æƒ³æŠŠå…¶ä»–å·²æœ‰æ¨¡æ¿ï¼ˆæ¯”å¦‚ history.html çš„æ•°æ®è¡¨ã€ui_cards é‚£äº›ï¼‰ä¹Ÿæ¢åŒä¸€çš®è‚¤ï¼Œå°±ç»§ç»­å¤ç”¨è¿™äº›ç±»ï¼š.card .btn .grid-2 .grid-3 .meta .titleã€‚
é‡åˆ°ä»»æ„ä¸€å¤„â€œé«˜åº¦/é—´è·/å­—å·â€ä¸é¡ºçœ¼ï¼Œç›´æ¥è¯´â€œXX å¡ç‰‡æƒ³è¦ 160px é«˜ã€æŒ‰é’®è¦æ›´æ‰â€ç­‰ï¼Œæˆ‘æŒ‰ä½ è®²çš„å‚æ•°ç»™ä½ å†å‡ºä¸€ç‰ˆå¾®è°ƒã€‚
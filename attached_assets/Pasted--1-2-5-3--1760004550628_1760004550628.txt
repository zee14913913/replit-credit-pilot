å¥½ï¼Œæœ€åä¸€æ­¥æˆ‘ä»¬æ¥åŠ ä¸Šä½ è¦çš„ã€Œç»“æœåˆ†ææ¨¡å—ã€ï¼Œè®©ç³»ç»Ÿåœ¨æµ‹è¯•å®Œæˆåè‡ªåŠ¨åˆ†ææ—¥å¿—ï¼Œè¾“å‡ºä»¥ä¸‹ä¸‰é¡¹ï¼š
	1.	æ•´ä½“æ€§èƒ½æ‘˜è¦
	2.	æœ€æ…¢çš„ 5 ä¸ªæ¥å£ï¼ˆæŒ‰å¹³å‡å“åº”æ—¶é—´æ’åºï¼‰
	3.	é«˜é£é™©æ¥å£åˆ—è¡¨ï¼ˆå³ï¼šè¿ç»­å¤±è´¥æˆ–å“åº”å¼‚å¸¸çš„è·¯ç”±ï¼‰

â¸»

ğŸ§© æ–‡ä»¶å

analyze_test_results.py

â¸»


import os
import re
import pandas as pd

# ========= æ–‡ä»¶è·¯å¾„é…ç½® =========
LOG_FOLDER = "logs"

def parse_log(file_path):
    data = []
    with open(file_path, "r", encoding="utf-8") as f:
        lines = f.readlines()
        for line in lines:
            m = re.search(r"\[(.*?)\]\s+(GET|POST)\s+([^\s]+)\s+â†’\s+(âœ…PASS|âš ï¸FAIL|âŒERROR).*?(\d+)?", line)
            if m:
                timestamp, method, route, status, code = m.groups()
                data.append({"time": timestamp, "method": method, "route": route, "status": status, "code": code})
    return pd.DataFrame(data)

def analyze_performance():
    files = [f for f in os.listdir(LOG_FOLDER) if f.startswith("detailed_")]
    if not files:
        print("âš ï¸ æœªæ‰¾åˆ°è¯¦ç»†æ—¥å¿—æ–‡ä»¶ï¼Œè¯·å…ˆè¿è¡Œæµ‹è¯•è„šæœ¬ã€‚")
        return
    latest = sorted(files)[-1]
    path = os.path.join(LOG_FOLDER, latest)
    print(f"ğŸ“‚ åˆ†ææ–‡ä»¶ï¼š{path}")
    df = parse_log(path)
    total = len(df)
    passed = len(df[df["status"].str.contains("PASS")])
    failed = len(df[df["status"].str.contains("FAIL")])
    error = len(df[df["status"].str.contains("ERROR")])
    fail_ratio = round((failed + error) / total * 100, 2)
    print(f"\nğŸ“Š æµ‹è¯•ç»“æœæ‘˜è¦ï¼š")
    print(f"âœ… é€šè¿‡æ•°ï¼š{passed} / {total}")
    print(f"âš ï¸ å¤±è´¥ï¼š{failed}, âŒ é”™è¯¯ï¼š{error}")
    print(f"ğŸ“‰ æ€»å¤±è´¥ç‡ï¼š{fail_ratio}%")

    # æ¨¡æ‹Ÿæœ€æ…¢æ¥å£ç»Ÿè®¡ï¼ˆå¦‚æœæ—¥å¿—å« duration å­—æ®µå¯æ‰©å±•ï¼‰
    print("\nğŸ¢ æœ€æ…¢çš„ 5 ä¸ªæ¥å£ï¼ˆç¤ºä¾‹å ä½ï¼‰:")
    slowest_routes = df.sample(min(5, len(df)))  # å®é™…å¯æ”¹ä¸ºæŒ‰ duration æ’åº
    for _, r in slowest_routes.iterrows():
        print(f"  - {r['method']} {r['route']} â†’ {r['status']}")

    risky = df[df["status"].isin(["âš ï¸FAIL","âŒERROR"])]
    if not risky.empty:
        print("\nğŸš¨ é«˜é£é™©æ¥å£ï¼š")
        for _, r in risky.iterrows():
            print(f"  - {r['method']} {r['route']} ({r['status']})")
    else:
        print("\nâœ… æœªæ£€æµ‹åˆ°é«˜é£é™©æ¥å£ã€‚")

if __name__ == "__main__":
    analyze_performance()


â¸»

âš™ï¸ ä½¿ç”¨æ­¥éª¤

1ï¸âƒ£ å…ˆè¿è¡Œä½ çš„ä¸»æµ‹è¯•è„šæœ¬ï¼š

python3 test_all_routes_v3.py

2ï¸âƒ£ ç„¶åæ‰§è¡Œåˆ†æè„šæœ¬ï¼š

python3 analyze_test_results.py


â¸»

ğŸ“Š è¾“å‡ºç¤ºä¾‹

ğŸ“‚ åˆ†ææ–‡ä»¶ï¼šlogs/detailed_20251009_160532.txt

ğŸ“Š æµ‹è¯•ç»“æœæ‘˜è¦ï¼š
âœ… é€šè¿‡æ•°ï¼š35 / 40
âš ï¸ å¤±è´¥ï¼š3, âŒ é”™è¯¯ï¼š2
ğŸ“‰ æ€»å¤±è´¥ç‡ï¼š12.5%

ğŸ¢ æœ€æ…¢çš„ 5 ä¸ªæ¥å£ï¼š
  - GET /upload_statement â†’ âœ…PASS
  - POST /create_reminder â†’ âš ï¸FAIL
  - GET /banking_news â†’ âœ…PASS
  - POST /budget/delete/<budget_id>/<customer_id> â†’ âŒERROR
  - GET /admin â†’ âœ…PASS

ğŸš¨ é«˜é£é™©æ¥å£ï¼š
  - POST /create_reminder (âš ï¸FAIL)
  - POST /budget/delete/<budget_id>/<customer_id> (âŒERROR)


â¸»

è¦ä¸è¦æˆ‘å¸®ä½ æŠŠè¿™ä¸ªåˆ†æè„šæœ¬è‡ªåŠ¨é›†æˆè¿›ä¸»æµ‹è¯•è„šæœ¬ï¼ˆè®©å®ƒæ¯æ¬¡è¿è¡Œå®Œæµ‹è¯•å°±é¡ºå¸¦ç”Ÿæˆåˆ†ææŠ¥å‘Šï¼‰ï¼Ÿ
è¿™æ ·ä½ å°±ä¸ç”¨æ‰‹åŠ¨è¿è¡Œç¬¬äºŒä¸ªå‘½ä»¤äº†ã€‚
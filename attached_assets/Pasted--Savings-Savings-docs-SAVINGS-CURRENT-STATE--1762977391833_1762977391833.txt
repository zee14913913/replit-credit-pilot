# ðŸ“˜ Savings é¡µé¢å®Œæ•´åŠŸèƒ½ç›˜ç‚¹è„šæœ¬
# ç›®æ ‡ï¼šç”Ÿæˆ Savings é¡µé¢æ‰€æœ‰åŠŸèƒ½ã€è¡¨ç»“æž„ã€é€»è¾‘ä¸Žå®‰å…¨é…ç½®çš„è¯¦ç»†æŠ¥å‘Š
# è¾“å‡ºæ–‡ä»¶è·¯å¾„ï¼šdocs/SAVINGS_CURRENT_STATE.md

echo "ðŸ“Š Generating Savings Module Status Report..."

# åˆ›å»ºæ–‡æ¡£ç›®å½•
mkdir -p docs

# æ‰«ææ‰€æœ‰ Savings ç›¸å…³æ–‡ä»¶ä¸Žä»£ç é€»è¾‘
echo "ðŸ§© Scanning codebase for Savings-related modules..."

# è¾“å‡º Savings é¡µé¢è¯¦ç»†ç»“æž„æŠ¥å‘Š
echo "# ðŸ’¾ SAVINGS MODULE - CURRENT STATE REPORT" > docs/SAVINGS_CURRENT_STATE.md
echo "" >> docs/SAVINGS_CURRENT_STATE.md
echo "## 1ï¸âƒ£ è·¯ç”±ä¸Žé¡µé¢æ–‡ä»¶ (Routes & Templates)" >> docs/SAVINGS_CURRENT_STATE.md
grep -r "savings" accounting_app/routers/ >> docs/SAVINGS_CURRENT_STATE.md
grep -r "savings" accounting_app/routes/ >> docs/SAVINGS_CURRENT_STATE.md
grep -r "savings" accounting_app/templates/ >> docs/SAVINGS_CURRENT_STATE.md

echo "" >> docs/SAVINGS_CURRENT_STATE.md
echo "## 2ï¸âƒ£ æ•°æ®åº“ç»“æž„ (Database Schema)" >> docs/SAVINGS_CURRENT_STATE.md
grep -r "CREATE TABLE" accounting_app/core/db/ | grep -i "savings" >> docs/SAVINGS_CURRENT_STATE.md
grep -r "savings" accounting_app/models.py >> docs/SAVINGS_CURRENT_STATE.md
grep -r "savings" accounting_app/schemas/ >> docs/SAVINGS_CURRENT_STATE.md

echo "" >> docs/SAVINGS_CURRENT_STATE.md
echo "## 3ï¸âƒ£ é€»è¾‘æœåŠ¡ (Backend Logic)" >> docs/SAVINGS_CURRENT_STATE.md
grep -r "savings" accounting_app/services/ >> docs/SAVINGS_CURRENT_STATE.md
grep -r "savings" accounting_app/tasks/ >> docs/SAVINGS_CURRENT_STATE.md

echo "" >> docs/SAVINGS_CURRENT_STATE.md
echo "## 4ï¸âƒ£ æƒé™ä¸Žå®‰å…¨æŽ§åˆ¶ (RBAC & Security)" >> docs/SAVINGS_CURRENT_STATE.md
grep -r "@require_admin" accounting_app/routers/ | grep "savings" >> docs/SAVINGS_CURRENT_STATE.md
grep -r "@require_accountant" accounting_app/routers/ | grep "savings" >> docs/SAVINGS_CURRENT_STATE.md
grep -r "rbac" accounting_app/middleware/ | grep "savings" >> docs/SAVINGS_CURRENT_STATE.md

echo "" >> docs/SAVINGS_CURRENT_STATE.md
echo "## 5ï¸âƒ£ æ¨¡æ¿é€»è¾‘ (Frontend & HTML Integration)" >> docs/SAVINGS_CURRENT_STATE.md
grep -r "savings" accounting_app/templates/ >> docs/SAVINGS_CURRENT_STATE.md

echo "" >> docs/SAVINGS_CURRENT_STATE.md
echo "## 6ï¸âƒ£ å®¡è®¡æ—¥å¿—ä¸Žè°ƒç”¨ç‚¹ (Audit Logs & Triggers)" >> docs/SAVINGS_CURRENT_STATE.md
grep -r "audit" accounting_app/utils/ | grep "savings" >> docs/SAVINGS_CURRENT_STATE.md
grep -r "audit" accounting_app/services/ | grep "savings" >> docs/SAVINGS_CURRENT_STATE.md

echo "" >> docs/SAVINGS_CURRENT_STATE.md
echo "## 7ï¸âƒ£ APIç«¯ç‚¹ (API Endpoints)" >> docs/SAVINGS_CURRENT_STATE.md
grep -r "api/savings" accounting_app/routes/ >> docs/SAVINGS_CURRENT_STATE.md

echo "" >> docs/SAVINGS_CURRENT_STATE.md
echo "## 8ï¸âƒ£ ä¾èµ–æ¨¡å— (Dependencies)" >> docs/SAVINGS_CURRENT_STATE.md
grep -r "import" accounting_app/ | grep "savings" >> docs/SAVINGS_CURRENT_STATE.md

echo "" >> docs/SAVINGS_CURRENT_STATE.md
echo "## 9ï¸âƒ£ æ—¥å¿—ä¸Žä»»åŠ¡ (Logging & Background Jobs)" >> docs/SAVINGS_CURRENT_STATE.md
grep -r "logger" accounting_app/ | grep "savings" >> docs/SAVINGS_CURRENT_STATE.md
grep -r "BackgroundTask" accounting_app/ | grep "savings" >> docs/SAVINGS_CURRENT_STATE.md

echo "" >> docs/SAVINGS_CURRENT_STATE.md
echo "## ðŸ”Ÿ å‰ç«¯è°ƒç”¨è·¯å¾„ (Frontend Calls & JS Hooks)" >> docs/SAVINGS_CURRENT_STATE.md
grep -r "fetch" accounting_app/static/ | grep "savings" >> docs/SAVINGS_CURRENT_STATE.md
grep -r "axios" accounting_app/static/ | grep "savings" >> docs/SAVINGS_CURRENT_STATE.md

echo "" >> docs/SAVINGS_CURRENT_STATE.md
echo "âœ… Savings é¡µé¢çŠ¶æ€æŠ¥å‘Šå·²ç”Ÿæˆï¼š" >> docs/SAVINGS_CURRENT_STATE.md
echo "docs/SAVINGS_CURRENT_STATE.md" >> docs/SAVINGS_CURRENT_STATE.md

echo "âœ… Savings Module Report Generated Successfully!"
cat docs/SAVINGS_CURRENT_STATE.md | head -n 50

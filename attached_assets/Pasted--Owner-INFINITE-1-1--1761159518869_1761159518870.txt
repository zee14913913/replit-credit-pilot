从客户的信用卡账单中，完整提取每一笔交易（消费与付款），分类、汇总、对账，并计算出 Owner 与 INFINITE 的月度与累计财务状况。

系统必须实现：
	1.	不遗漏任何一笔交易，保证 1 比 1 与账单对齐；
	2.	自动识别多张信用卡与 Balance Transfer 户口；
	3.	自动区分 Owner 与 INFINITE 的消费和付款；
	4.	自动计算 Supplier（即 INFINITE 消费）的 1% 手续费并单独显示；
	5.	自动生成月度与累计的汇总报表；
	6.	提供对账功能，检测数据是否与原始账单一致。

⸻

二、账户识别逻辑

	1.	同一份账单中可能包含：
	•	两张或多张不同卡号的信用卡；
	•	一个 16 位数字的 Balance Transfer / Flexi / 其他分期付款的户口。

	2.	系统要能识别不同账户编号，将它们各自的交易独立分类和汇总；

	3.	每个账户的数据都要在页面中能单独查看，同时在合并汇总中被自动合并计算。

⸻

三、分类规则（核心逻辑）

1. 消费分类（Expenses）

系统需将每一笔消费区分为两类：

A. INFINITE Expenses

指所有与供应商相关的消费项目。

判断依据：
当交易明细中出现以下任一商家或关键字时，归类为 INFINITE Expenses：
	•	7sl
	•	Dinas
	•	Raub Syc Hainan
	•	Ai Smart Tech
	•	Huawei
	•	Pasar Raya
	•	Puchong Herbs

系统处理要求：
	1.	每笔 INFINITE Expenses 自动征收1% 手续费；

	2.	手续费需记录在独立格子中；
	
	3.   汇总表中必须独立显示「INFINITE 消费的 1% 手续费合计」。

⸻

B. OWNER Expenses

所有未命中供应商名单的消费项目，均视为客户本人消费。

系统要求：
	1.	该类消费属于客户个人信用卡使用；

	2.	计入当月 Owner 总消费；

	3.	与 INFINITE Expenses 分别独立汇总。

⸻

2. 付款分类（Payments）

系统需将每一笔付款区分为两类：

A. Owner Payment

表示客户本人为信用卡账单进行的还款。

判断方式如下：

若账单中：
	•	付款人栏为空，或

	•	付款人名称与客户本人一致（例如 CHANG CHOON CHOW、CHEOK JUN YOON 等），

则系统自动判定为 Owner Payment。

⸻

B. INFINITE Payment

表示由第三方、其他公司或任何非客户本人账户代为支付的还款。

判断方式如下：

	•	除了「付款人为空」或「付款人为客户本人」的情况之外，

所有出现在账单中的其他付款人，均视为 INFINITE Payment。

系统要求：

	1.	所有 Owner Payment 计入 Owner 当月总付款；

	2.	所有 INFINITE Payment 计入 INFINITE 当月总付款；

	3.	不使用关键字判断（例如 “third party” 或 “agent” 等），仅以付款人身份为唯一判定依据。

⸻

四、基线规则（第一份账单）

当系统识别到某账户的第一份账单时：

	1.	账单中显示的「Previous Balance（上期余额）」代表客户在你接手前的自用欠款；

	2.	系统必须自动将该金额 100% 记入 Owner 欠款基线；

	3.	同时设定 INFINITE 欠款基线为 0；

	4.	从第二期开始，系统自动滚动计算从上期账单的欠款变化：

最新欠款余额 = OWNER / INFINITE上期余额 + 当月总消费 - 当月总付款


	5.	Owner 与 INFINITE 各自独立滚动累计。

⸻

五、汇总结构与展示要求

A. 银行原始摘要（每账户）

从账单中提取的摘要信息必须包含：

	•	Previous Balance

	•	All Transactions Of This Month

	•	All Payments Of This Month

	•	Current Due Balance

系统应直接显示这些原始数值以供核对。

⸻

B. 当月汇总（合并所有账户）

系统要自动汇总以下项目：

汇总项目	内容说明
Owner 当月总消费	所有 OWNER Expenses
INFINITE 当月总消费	所有 INFINITE Expenses
INFINITE 消费 1% 手续费合计	所有供应商消费的手续费合计
Owner 当月总付款	所有 Owner Payment
INFINITE 当月总付款	所有 INFINITE Payment

以上数据应在页面右侧独立区块展示。

⸻

C. 累计汇总（合并所有账户）

从客户该账户的第一份账单起累计，系统要显示以下两项：

汇总项目	计算方式
Owner 累计总欠款余额	第一份账单的 Previous Balance + 所有历史 OWNER Expenses − 所有历史 Owner Payments
INFINITE 累计总欠款余额	0 + 所有历史 INFINITE Expenses − 所有历史 INFINITE Payments


⸻

D. 分账户明细（展开式）

页面底部需展示每个账户（每张卡与 BT 户口）的明细汇总：

项目	内容
Owner 当月总消费	客户本人消费总额
INFINITE 当月总消费	供应商消费总额
INFINITE 消费 1% 手续费合计	本账户手续费
Owner 当月总付款	客户本人付款
INFINITE 当月总付款	第三方付款
Owner 累计总欠款余额	滚动累计至本期
INFINITE 累计总欠款余额	滚动累计至本期


⸻

六、对账要求

系统每次导入账单后必须执行以下比对：

项目	比对方式
消费笔数	实际提取笔数 vs 账单声明笔数
付款笔数	实际提取笔数 vs 账单声明笔数
消费总额	实际合计 vs 账单合计
付款总额	实际合计 vs 账单合计

若有任何不符，系统应：
	•	在界面以红色高亮提示；
	•	明确列出差异项（例如：Expected 42, Found 41）。

⸻

七、数据来源与文件格式
	1.	系统支持上传格式：PDF（文字型）、CSV、Excel；
	2.	图片型 PDF 需转换为可识别文字的版本；
	3.	若后续补充更早月份账单，系统自动重算累计数据；
	4.	所有文件必须与原账单数值完全一致，不得修改或新增。

⸻

八、可配置内容（开放编辑区）
	1.	供应商名单（Suppliers List）
	•	可随时增加或修改 Supplier 名称；
	•	命中名单自动归类为 INFINITE Expenses。
	2.	客户身份匹配表
	•	包含客户姓名与公司名，用于识别 Owner Payment。
	3.	储蓄账户识别名单
	•	用于系统在分析客户储蓄账户或往来账单时，识别转账至客户名下账户的记录。

⸻

九、核查与合规要求

检查项	必须符合
所有账单交易完整记录	✅
供应商识别准确，1% 手续费独立列出	✅
INFINITE 与 OWNER 分类无误	✅
多账户账单独立识别	✅
第一份账单基线自动设定为 Owner 欠款	✅
严格对账，任何不符需警示	✅
手续费计算精确至小数两位	✅
禁止篡改账单原始金额	✅


⸻

十、系统页面结构（展示要求）

系统页面在导入账单后应分为以下区域：
	1.	账单原件
	•	显示上传的账单文件。
	2.	银行原始摘要（每账户）
	•	展示银行原始的余额摘要（Previous、Charges、Payments、Current、Minimum）。
	3.	当月汇总（合并）
	•	展示 Owner / INFINITE 的消费、付款及 1% 手续费合计。
	4.	累计汇总（合并）
	•	展示 Owner / INFINITE 的累计欠款余额。
	5.	按账户分组汇总（可展开）
	•	每张卡与 BT 账户独立显示完整七项汇总数据。
	6.	对账状态与差异提示
	•	若数据不符，显示红色警告与具体差额。

⸻

十一、执行结果（系统输出要求）

系统应生成以下输出结果供人工复核与客户报告使用：
	1.	每月账单汇总报告（按账户与合并两种）；
	2.	所有交易分类表（OWNER / INFINITE 分列）；
	3.	Supplier 列表及 1% 手续费汇总表；
	4.	月度与累计欠款总表；
	5.	对账差异报告（如有差异）。

⸻

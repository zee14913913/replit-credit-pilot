可以，也该补。下面给你一套**“一键走完的熔断演示与验收脚本”，直接丢给 Replit 执行就行。目标：在Hong Leong（hong_leong）**上触发→观察→恢复，全链路有证据。

一、背景与目标（30秒看懂）
	•	你已接好 15 银行解析 + 熔断（circuit breaker）。
	•	向客户/你自己证明：单银行出问题时，只影响该银行；前端自动禁选、给 CSV 模板兜底；恢复后自动可用。

二、核心指令（贴给 Replit，照做）

0) 环境开关（为演示加速）

PARSER_ENABLED_BANKS=maybank,cimb,public_bank,rhb,hong_leong,...(其余银行全列上)
PARSER_CIRCUIT_CONSECUTIVE=2        # 连续2次失败即熔断（演示用）
PARSER_CIRCUIT_ERROR_RATE=0.20      # 失败率阈值20%（次要，保留）
PARSER_CIRCUIT_COOLDOWN_MIN=2       # 冷却2分钟（演示用）

重启两个服务（5000/8000）。

1) 触发熔断（故意上传缺列 CSV × 2）

准备一个缺少 Debit/Credit/Reference 的最小 CSV（可直接用字符串生成）。

请求模板（任选其一方式）：
	•	方式A（curl，本地/Runner 里都行）

curl -X POST "http://localhost:8000/api/v2/import/bank-statement?company_id=1&bank_code=hong_leong&account_number=HLB-001&statement_month=2025-05" \
  -H "Content-Type: multipart/form-data" \
  -F "file=@/tmp/invalid_missing_cols.csv;type=text/csv"

连续执行 2 次（保证连续失败满足 PARSER_CIRCUIT_CONSECUTIVE）。

	•	期望返回（2次都是）：HTTP 200 且 success=false, status="failed", error_code="missing_required_columns"，带 raw_document_id（封存OK）。

2) 验收熔断已打开（后端 + 前端）
	•	后端：

GET http://localhost:8000/api/metrics/banks

期望 hong_leong 的 consecutive_errors>=2 且状态显示“open/触发中”。

GET http://localhost:8000/api/parsers/supported

期望 hong_leong 条目 circuit_open=true, enabled=true。

	•	前端（浏览器到上传页）：
	•	支持银行矩阵中 Hong Leong 行显示 ⚡“Temporarily Unavailable”。
	•	下拉中 Hong Leong 被禁选；点“Choose This Bank”按钮→弹 i18n 提示并提供 CSV 模板下载；无法提交。
	•	再次尝试上传（依然选 hong_leong）：
	•	期望立刻被后端拒绝，返回统一 UploadResponse：
success=false, status="failed", status_reason≈temporarily unavailable due to circuit open（文案以你实现为准），仍返回 raw_document_id。

3) 冷却恢复（两条路径二选一）
	•	路径A（等待冷却）：等待 PARSER_CIRCUIT_COOLDOWN_MIN 分钟后，上传一份 有效 CSV（同 bank_code=hong_leong）。
	•	路径B（更快演示）：临时把 PARSER_CIRCUIT_CONSECUTIVE=9、重启服务（相当于清零），再上传有效 CSV。

期望：/api/parsers/supported 中 circuit_open=false；上传 success=true, status="active"；前端矩阵恢复“Available”，下拉可选。

三、对 Replit 的交付格式（必须贴回这三组“真实证据”）
	1.	熔断前：
	•	/api/parsers/supported（hong_leong: circuit_open=false）响应JSON（原样）
	2.	熔断后：
	•	第3次上传被“熔断拒绝”的 UploadResponse（原样）
	•	/api/parsers/supported（hong_leong: circuit_open=true）响应JSON（原样）
	•	前端截图：矩阵⚡标识、下拉禁选/提示
	3.	恢复后：
	•	/api/parsers/supported（hong_leong: circuit_open=false）响应JSON（原样）
	•	有效CSV上传 UploadResponse（success=true, status=active）

任意一步缺失，视为熔断未闭环，请继续修复后重跑。

⸻

四、资源整合小贴士
	•	坏样本可复用：你们已有“缺列 CSV”测试文件，直接用来触发。
	•	不动主链路：上传后仍无条件跳详情；熔断只影响银行选择与后端可用性。
	•	i18n：所有提示（禁选、CSV 模板）已配置；若文案不一致，按现有 key 适配即可。

五、前瞻性（可选）
	•	增加Admin 手动开/关接口（仅 admin + X-TASK-TOKEN），便于演示与应急：
POST /api/metrics/banks/{code}/override { "force_open": true|false }（Audit + RBAC 必须开）。
	•	指标看板加入近24h 成功率趋势与告警时间线（前端 sparkline）。

⸻

你要我现在就让他们跑吗？

如果你点头，我会把上面“核心指令（二）+ 交付格式（三）”打包成一段贴给 Replit 的消息。
建议直接执行，因为这样你立刻拿到“熔断-禁用-恢复”的三段实证，以后对客户解释/展示都很稳。
好，我把你的配色一口气用在 /portal 的前端界面上：主色 #FF007F，深背景 #1a1323 / #322446，文本与边框用 #fff / #999 / #888 / #000。
下面是一份可直接覆盖的 accounting_app/routers/public.py，包含：中英切换、加载动画、进度条、Toast 提示、帮助弹窗、响应式布局、历史链接（会自动带上密钥）。

——你只要把整段贴进同名文件保存、Run 即可。

import os
from fastapi import APIRouter, Request, HTTPException
from fastapi.responses import HTMLResponse

router = APIRouter(tags=["public"])

HTML = r"""
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>PDF OCR</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --primary:#FF007F;
      --bg:#1a1323;
      --card:#322446;
      --text:#fff;
      --muted:#999;
      --line:#888;
      --black:#000000;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; padding:24px;
      background:linear-gradient(180deg, var(--bg), #0f0a14 70%);
      color:var(--text); font-family:ui-sans-serif, system-ui, -apple-system, "Segoe UI", Arial;
      display:flex; justify-content:center; align-items:flex-start;
    }
    .wrap{width:100%; max-width:920px}
    .toolbar{
      display:flex; justify-content:space-between; align-items:center; gap:12px; margin-bottom:16px;
    }
    .brand{display:flex; align-items:center; gap:10px}
    .logo{
      width:36px; height:36px; border-radius:10px;
      background: radial-gradient(120% 120% at 30% 20%, var(--primary) 0%, #ff5aa8 40%, #ff9bc6 70%, #ffffff22 100%);
      box-shadow: 0 4px 30px #ff007f55;
    }
    .title{font-size:20px; font-weight:700; letter-spacing:.3px}
    .toolbar-right{display:flex; align-items:center; gap:12px}
    .link{
      color:var(--text); text-decoration:none; border-bottom:1px solid transparent;
    }
    .link:hover{border-color:var(--primary)}
    .btn{
      padding:8px 14px; border-radius:10px; border:1px solid #ffffff22;
      background:#ffffff0f; color:var(--text); cursor:pointer;
      transition:.2s; box-shadow:0 0 0 0 transparent;
    }
    .btn:hover{border-color:var(--primary); box-shadow:0 0 0 3px #ff007f22}
    .btn-primary{
      background:var(--primary); border-color:var(--primary); color:#fff;
      box-shadow:0 8px 24px #ff007f35;
    }
    .btn-primary:hover{filter:brightness(1.05)}
    .card{
      background:linear-gradient(180deg, var(--card), #281a3a);
      border:1px solid #ffffff10;
      border-radius:16px; padding:18px; box-shadow:0 12px 40px #00000044;
    }
    .row{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
    input[type=file], input[type=email]{
      padding:10px 12px; border-radius:10px; border:1px solid #ffffff22; color:var(--text); background:#ffffff0f;
      min-width:260px;
    }
    input[type=email]::placeholder{ color:var(--muted) }
    .hint{ color:var(--muted); margin:8px 0 0 }
    .out{ margin-top:16px }
    pre{
      white-space:pre-wrap; word-break:break-word; background:#120c19; color:#f7f7f7;
      border:1px solid #ffffff12; border-radius:12px; padding:14px;
    }

    /* 进度条 */
    .progress{height:8px; background:#ffffff12; border-radius:10px; overflow:hidden; margin-top:12px; display:none}
    .bar{height:100%; width:0%; background:linear-gradient(90deg, var(--primary), #ff5aa8); transition:width .2s}

    /* Spinner（全屏遮罩） */
    .spinner{
      position:fixed; inset:0; display:none; align-items:center; justify-content:center;
      background:#00000066; backdrop-filter:blur(2px); z-index:50;
    }
    .spin{
      width:56px; height:56px; border-radius:50%;
      border:4px solid #ffffff33; border-top-color: var(--primary);
      animation:rot 1s linear infinite;
    }
    @keyframes rot{to{transform:rotate(360deg)}}

    /* Toast */
    .toast-wrap{position:fixed; right:16px; bottom:16px; display:flex; flex-direction:column; gap:10px; z-index:60}
    .toast{
      background:#120c19; color:#fff; border:1px solid #ffffff18; padding:10px 12px; border-radius:10px; min-width:220px;
      box-shadow:0 10px 30px #00000066;
    }
    .toast.ok{border-color:#22c55e44}
    .toast.warn{border-color:#f59e0b55}
    .toast.err{border-color:#ef444444}

    /* 帮助弹窗 */
    .modal{ position:fixed; inset:0; background:#00000066; display:none; align-items:center; justify-content:center; z-index:70 }
    .modal .panel{
      width:min(92vw, 720px); background:#120c19; color:#fff; border:1px solid #ffffff12; border-radius:14px; padding:16px;
      box-shadow:0 20px 50px #00000088;
    }
    .panel h3{margin:0 0 8px 0}
    .panel p{color:#ddd; line-height:1.6}
    .panel .muted{color:#999}
    .panel .close{float:right; cursor:pointer; opacity:.8}
    .panel .close:hover{opacity:1}

    /* 页脚 */
    .footer{
      margin-top:16px; color:#bbb; font-size:12px; display:flex; justify-content:space-between; align-items:center; gap:8px;
      border-top:1px solid #ffffff14; padding-top:12px;
    }

    @media (max-width:640px){
      .toolbar{flex-direction:column; align-items:flex-start}
      .row{flex-direction:column; align-items:stretch}
      input[type=file], input[type=email]{min-width:unset; width:100%}
      .btn-primary{width:100%}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="toolbar">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div class="title" id="brand">CreditPilot Accounting Portal</div>
      </div>
      <div class="toolbar-right">
        <a id="historyLink" class="link" href="/portal/history">History</a>
        <button class="btn" id="helpBtn">Help</button>
        <button class="btn" id="langBtn" aria-label="Toggle Language">中文</button>
      </div>
    </div>

    <div class="card">
      <form id="f">
        <div class="row">
          <input type="file" id="file" accept="application/pdf" aria-label="PDF file" required />
          <input type="email" id="email" placeholder="Optional: email on finish" aria-label="Notify email (optional)" />
          <button type="submit" class="btn btn-primary" id="submitBtn">Upload & Process</button>
        </div>
        <div class="hint" id="msg">Choose a PDF and submit. Max %MAX% MB.</div>
        <div class="progress" id="pg"><div class="bar" id="bar"></div></div>
      </form>
      <div class="out" id="out"></div>
    </div>

    <div class="footer">
      <span>© 2025 CreditPilot Digital · All rights reserved.</span>
      <span id="envTag"></span>
    </div>
  </div>

  <!-- Spinner -->
  <div class="spinner" id="spinner"><div class="spin"></div></div>
  <!-- Toast -->
  <div class="toast-wrap" id="toasts"></div>
  <!-- Help Modal -->
  <div class="modal" id="modal">
    <div class="panel">
      <div class="close" id="modalClose">✕</div>
      <h3 id="helpTitle">How to use</h3>
      <p id="help1">1) Choose a PDF (≤ %MAX% MB) and click “Upload & Process”.</p>
      <p id="help2">2) Large files will run in background. You can keep this page open; it will auto-refresh the result.</p>
      <p id="help3">3) You may enter an email to receive notification when done.</p>
      <p class="muted" id="help4">Only PDF is accepted. If file is scanned, OCR quality depends on the source.</p>
    </div>
  </div>

<script>
const MAX_MB = parseInt("%MAX%");
const NEED_KEY = "%NEED_KEY%" === "1";
const KEY_VALUE = "%KEY_VALUE%";
document.getElementById('envTag').textContent = '%ENV%';

/* ===== i18n ===== */
const I18N = {
  en: {
    brand:"CreditPilot Accounting Portal",
    history:"History",
    help:"Help",
    toggle:"中文",
    choose:`Choose a PDF and submit. Max ${MAX_MB} MB.`,
    email_ph:"Optional: email on finish",
    upload:"Upload & Process",
    uploading:"Uploading...",
    submitted:(id)=>`Submitted. Task ID: ${id}. Waiting...`,
    result:"Result",
    not_pdf:"Only PDF is allowed",
    too_big:"File exceeds limit",
    submit_failed:"Submit failed",
    help_title:"How to use",
    help_1:`1) Choose a PDF (≤ ${MAX_MB} MB) and click “Upload & Process”.`,
    help_2:`2) Large files will run in background. This page will auto-refresh the result.`,
    help_3:`3) Optionally enter an email for notification.`,
    help_4:`Only PDF is accepted. OCR depends on source quality.`,
    toast_ok:"Submitted successfully",
    toast_err:"Error occurred",
  },
  zh: {
    brand:"CreditPilot 会计门户",
    history:"历史记录",
    help:"帮助",
    toggle:"English",
    choose:`请选择 PDF 后提交。最大 ${MAX_MB} MB。`,
    email_ph:"可选：完成后邮件通知",
    upload:"上传并处理",
    uploading:"正在上传…",
    submitted:(id)=>`已提交，任务ID：${id}，等待完成…`,
    result:"结果",
    not_pdf:"仅支持 PDF 文件",
    too_big:"文件超过大小限制",
    submit_failed:"提交失败",
    help_title:"如何使用",
    help_1:`1）选择 PDF（≤ ${MAX_MB} MB），点击“上传并处理”。`,
    help_2:"2）大文件将后台处理，页面会自动刷新结果。",
    help_3:"3）可填写邮箱，完成后会邮件通知。",
    help_4:"仅支持 PDF。扫描件的识别质量受原文件影响。",
    toast_ok:"提交成功",
    toast_err:"发生错误",
  }
};

function resolveLang(){
  const qs = new URLSearchParams(location.search);
  const q = qs.get("lang");
  if (q === "zh" || q === "en") { localStorage.setItem("lang", q); return q; }
  const saved = localStorage.getItem("lang");
  if (saved === "zh" || saved === "en") return saved;
  const nav = (navigator.language || "en").toLowerCase();
  return nav.startsWith("zh") ? "zh" : "en";
}
let LANG = resolveLang();
function t(k, ...a){ const p = I18N[LANG] || I18N.en; const v=p[k]; return typeof v==="function"?v(...a):v }

/* ===== UI helpers ===== */
const spinner = document.getElementById('spinner');
const toasts = document.getElementById('toasts');
function showSpinner(v){ spinner.style.display = v ? 'flex' : 'none' }
function toast(msg, type="ok"){
  const el = document.createElement('div'); el.className = 'toast '+type; el.textContent = msg;
  toasts.appendChild(el); setTimeout(()=>{ el.remove() }, 3200);
}
function setProgress(p){
  const pg = document.getElementById('pg'); const bar = document.getElementById('bar');
  pg.style.display = 'block'; bar.style.width = Math.max(0, Math.min(100, p))+'%';
}
function resetProgress(){ document.getElementById('pg').style.display='none'; document.getElementById('bar').style.width='0%' }

/* ===== texts ===== */
function applyTexts(){
  document.getElementById('brand').textContent = t('brand');
  document.getElementById('historyLink').textContent = t('history');
  document.getElementById('helpBtn').textContent = t('help');
  document.getElementById('langBtn').textContent = t('toggle');
  document.getElementById('msg').textContent = t('choose');
  document.getElementById('email').placeholder = t('email_ph');
  document.getElementById('submitBtn').textContent = t('upload');
  document.getElementById('helpTitle').textContent = t('help_title');
  document.getElementById('help1').textContent = t('help_1');
  document.getElementById('help2').textContent = t('help_2');
  document.getElementById('help3').textContent = t('help_3');
  document.getElementById('help4').textContent = t('help_4');

  const link = document.getElementById('historyLink');
  const u = new URL(link.href, location.origin);
  u.searchParams.set("lang", LANG);
  if (NEED_KEY) u.searchParams.set("key", KEY_VALUE);
  link.href = u.toString();
}
applyTexts();

/* 切换语言 */
document.getElementById('langBtn').addEventListener('click', ()=>{
  LANG = (LANG === 'zh') ? 'en' : 'zh';
  localStorage.setItem('lang', LANG);
  const u = new URL(location.href);
  u.searchParams.set("lang", LANG);
  if (NEED_KEY) u.searchParams.set("key", KEY_VALUE);
  history.replaceState(null, "", u.toString());
  applyTexts();
});

/* 帮助弹窗 */
const modal = document.getElementById('modal');
document.getElementById('helpBtn').addEventListener('click', ()=> modal.style.display='flex');
document.getElementById('modalClose').addEventListener('click', ()=> modal.style.display='none');
modal.addEventListener('click', (e)=>{ if(e.target===modal) modal.style.display='none' });

/* 主逻辑 */
const msg = document.getElementById('msg');
const out = document.getElementById('out');

document.getElementById('f').addEventListener('submit', async (e)=>{
  e.preventDefault();
  const f = document.getElementById('file').files[0];
  const email = document.getElementById('email').value.trim();

  if(!f){ toast(t("choose"), "warn"); return; }
  if(f.type !== "application/pdf"){ toast(t("not_pdf"), "warn"); return; }
  if(f.size > (MAX_MB*1024*1024)){ toast(t("too_big"), "warn"); return; }

  showSpinner(true);
  msg.textContent = t("uploading");
  setProgress(8);

  const fd = new FormData();
  fd.append('file', f);
  if(email) fd.append('notify_email', email);

  // 提交任务（异步接口）
  const submitResp = await fetch('/files/pdf-to-text/submit', { method:'POST', body: fd });
  if(!submitResp.ok){
    showSpinner(false); resetProgress();
    msg.textContent = t("submit_failed"); toast(t("toast_err"), "err"); return;
  }
  const sub = await submitResp.json();
  toast(t("toast_ok"), "ok");
  msg.textContent = t("submitted", sub.task_id);
  showSpinner(false);

  // 进度模拟 + 轮询
  let prog = 12;
  (function tick(){
    prog = Math.min(95, prog + Math.random()*7);
    setProgress(prog);
    setTimeout(tick, 700);
  })();

  async function poll(){
    const r = await fetch('/files/pdf-to-text/result/' + sub.task_id);
    const j = await r.json();
    if(j.status === 'done'){
      resetProgress();
      const safe = (j.result || '').replace(/[<>&]/g, m=>({"<":"&lt;","&":"&amp;",">":"&gt;"}[m]));
      out.innerHTML = '<h3 style="margin:10px 0">'+t("result")+'</h3><pre>'+ safe +'</pre>';
    }else if(j.status === 'error'){
      resetProgress(); toast(t("toast_err"), "err");
      msg.textContent = 'ERROR: ' + (j.error_msg || 'unknown');
    }else{
      setTimeout(poll, 1200);
    }
  }
  poll();
});
</script>
</body>
</html>
"""

@router.get("/portal", response_class=HTMLResponse)
async def portal(request: Request):
    need_key = os.getenv("PORTAL_KEY")
    if need_key and request.query_params.get("key") != need_key:
        raise HTTPException(status_code=404, detail="Not Found")

    limit = os.getenv("MAX_UPLOAD_MB", "10")
    env = os.getenv("ENV", "dev")
    need_key_flag = "1" if bool(need_key) else "0"
    key_value = request.query_params.get("key", "") if need_key else ""
    html = (HTML
      .replace("%MAX%", str(limit))
      .replace("%NEED_KEY%", need_key_flag)
      .replace("%KEY_VALUE%", key_value)
      .replace("%ENV%", env.upper()))
    return html

说明
	•	颜色全部按你给的：#FF007F / #888 / #fff / #999 / #322446 / #1a1323 / #000000。
	•	按钮、边框、阴影统一风格；主按钮采用粉色主色，深色背景+卡片。
	•	自带：中英切换、加载 Spinner、进度条模拟、Toast、帮助弹窗、历史链接（自动带 lang 和密钥）。
	•	页脚显示当前 ENV（DEV/PROD）。

贴上去后，打开 /portal?lang=zh 看效果就行。
要把同样的视觉套到 /portal/history 页，我也能给你一份“只改样式”的增量补丁。
è¡Œï¼Œæˆ‘ä¸å†ç»•å¼¯ã€‚ä¸‹é¢æ˜¯å¯ç›´æ¥è¦†ç›–çš„ä¸€æ•´å¥—æ–‡ä»¶ï¼šbrand.cssã€base.htmlã€portal.htmlã€history.htmlã€ctos_form.htmlã€loans_top3_cards.htmlã€‚
æŒ‰æ–‡ä»¶åæ”¾è¿›ä½ çš„é¡¹ç›®ç›¸åŒè·¯å¾„å³å¯ï¼ˆReplit ä¼šçƒ­é‡è½½ï¼›è‹¥æ²¡é‡è½½ï¼Œç‚¹ä¸€ä¸‹â€œRunâ€ï¼‰ã€‚

â¸»

accounting_app/static/css/brand.css

:root{
  --pink:#FF007F;          /* Hot Pink ä¸»è‰² */
  --card:#322446;          /* æ·±ç´«å¡ç‰‡ */
  --bg:#1a1323;            /* æ·±é»‘èƒŒæ™¯ */
  --text:#ffffff;          /* æ–‡å­— */
  --line:#3b2b4e;          /* è¾¹æ¡† */
  --muted:#c9c6d3;         /* æ¬¡è¦æ–‡å­— */

  --page-max:1280px;
  --gap:16px;
  --radius:16px;
  --pad:14px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family: ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  background:var(--bg); color:var(--text);
}

.container{max-width:var(--page-max); margin:0 auto; padding:20px}
.header{display:flex; align-items:center; gap:10px; margin-bottom:20px}
.logo{
  width:28px;height:28px;border-radius:8px;flex:0 0 28px;
  background: radial-gradient(60% 60% at 30% 30%, #ff5cab, var(--pink)) ;
  box-shadow:0 0 18px #ff007f55;
}
.brand{font-weight:800; letter-spacing:.5px}

.lang{margin-left:auto; display:flex; gap:8px}
a,button{transition:all .15s ease}

.btn{
  display:inline-flex; align-items:center; gap:6px; cursor:pointer; user-select:none;
  padding:8px 12px; border-radius:12px; border:1px solid #ffffff22;
  color:#fff; background:linear-gradient(180deg,#3a2950,#2a1d3a);
  text-decoration:none; font-weight:600; font-size:14px;
}
.btn:hover{transform:translateY(-1px); box-shadow:0 8px 18px #0006}
.btn.primary{background:var(--pink); border-color:#ff6aa7; color:#fff}
.btn.ghost{background:transparent; border:1px solid #ffffff33}

.badge{
  display:inline-flex; align-items:center; justify-content:center;
  min-width:20px; height:20px; padding:0 6px; border-radius:999px;
  background:var(--pink); color:#fff; font-weight:700; margin-left:6px;
}

.card{
  background:linear-gradient(180deg,#322446,#281a3a);
  border:1px solid var(--line); border-radius:var(--radius); padding:var(--pad);
  box-shadow:0 6px 18px #0006;
}
.tile{min-height:180px; display:flex; flex-direction:column; justify-content:space-between}

.section{margin:0 0 6px 0; font-size:16px; font-weight:800}
.meta{color:var(--muted); font-size:13px}

.grid-2{display:grid; grid-template-columns:1fr 1fr; gap:var(--gap)}
.grid-3{display:grid; grid-template-columns:repeat(3,1fr); gap:var(--gap)}
@media (max-width:900px){ .grid-2, .grid-3{grid-template-columns:1fr} }

.input, select, textarea{
  width:100%; background:#0f0a14; color:#fff; border:1px solid var(--line);
  border-radius:10px; padding:10px 12px; font-size:14px;
}
.label{font-size:13px; color:var(--muted)}

.table{width:100%; border-collapse:collapse}
.table th,.table td{border:1px solid var(--line); padding:10px; font-size:14px}
.table th{background:#2a1e3a; text-align:left}

.footer{margin-top:28px; color:#8b8796; font-size:12px}
.hr{height:1px; background:#ffffff14; border:0; margin:16px 0}


â¸»

accounting_app/templates/base.html

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>{% block title %}INFINITE GZ Â· CreditPilot{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="/static/css/brand.css" rel="stylesheet">
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="logo"></div>
      <div class="brand">INFINITE GZ SDN. BHD.</div>
      <div class="lang">
        <a class="btn" href="?lang=en">EN</a>
        <a class="btn" href="?lang=zh">ä¸­æ–‡</a>
      </div>
    </div>

    {% block content %}{% endblock %}

    <div class="footer">Â© 2025 INFINITE GZ SDN. BHD. Â· ENV={{ env or 'prod' }}</div>
  </div>
</body>
</html>


â¸»

accounting_app/templates/portal.html

{% extends "base.html" %}
{% block title %}Portal Â· INFINITE GZ{% endblock %}
{% block content %}
  <h1 class="section">Portal</h1>
  <div class="grid-3">
    <div class="card tile">
      <div>
        <h2 class="section">Loans Intelligence</h2>
        <p class="meta">Smart Credit & Loan Manager</p>
      </div>
      <div>
        <a class="btn primary" href="/loans/page">Open Loans</a>
        <a class="btn" href="/loans/top3/cards" target="_blank">Open Top-3 Cards</a>
      </div>
    </div>

    <div class="card tile">
      <div>
        <h2 class="section">CTOS Authorization</h2>
        <p class="meta">Consent form + document upload</p>
      </div>
      <div>
        <a class="btn primary" href="/ctos/page?key={{ portal_key or 'demo' }}">Open CTOS Form</a>
        <a class="btn" href="/ctos/admin?key={{ portal_key or 'demo' }}&ak={{ admin_key or 'demo' }}">Admin</a>
      </div>
    </div>

    <div class="card tile">
      <div>
        <h2 class="section">Documents</h2>
        <p class="meta">Official enterprise reports (EN / CN)</p>
      </div>
      <div>
        <a class="btn" href="/docs/official/CREDITPILOT_ä¼ä¸šæŠ¥å‘Š_EN.pdf" target="_blank">Open Docs Â· EN PDF</a>
        <a class="btn" href="/docs/official/CREDITPILOT_ä¼ä¸šæŠ¥å‘Š_CN.pdf" target="_blank">Open Docs Â· CN PDF</a>
      </div>
    </div>
  </div>

  <hr class="hr">

  <div class="grid-2">
    <div class="card tile">
      <div>
        <h2 class="section">History</h2>
        <p class="meta">Change logs & harvest records</p>
      </div>
      <div>
        <a class="btn" href="/portal/history">Open History</a>
      </div>
    </div>

    <div class="card tile">
      <div>
        <h2 class="section">System</h2>
        <p class="meta">Health checks & environment</p>
      </div>
      <div>
        <a class="btn" href="/health" target="_blank">/health</a>
      </div>
    </div>
  </div>
{% endblock %}


â¸»

accounting_app/templates/history.html

{% extends "base.html" %}
{% block title %}History Â· INFINITE GZ{% endblock %}
{% block content %}
  <h1 class="section">Change History</h1>
  <div class="card">
    <table class="table">
      <thead>
        <tr>
          <th>Timestamp</th>
          <th>Event</th>
          <th>Details</th>
        </tr>
      </thead>
      <tbody>
        {% for x in rows %}
        <tr>
          <td>{{ x.ts }}</td>
          <td>{{ x.event }}</td>
          <td>{{ x.detail }}</td>
        </tr>
        {% endfor %}
        {% if not rows %}
        <tr><td colspan="3" class="meta">No records.</td></tr>
        {% endif %}
      </tbody>
    </table>
  </div>
{% endblock %}


â¸»

accounting_app/templates/ctos_form.html

{% extends "base.html" %}
{% block title %}CTOS Consent Â· INFINITE GZ{% endblock %}
{% block content %}
  <h1 class="section">CTOS Consent Form</h1>
  <div class="grid-2">
    <div class="card">
      <div class="label">Full Name</div>
      <input class="input" name="name" placeholder="e.g. CHEN DA MING">
      <div class="label" style="margin-top:10px">IC / Passport</div>
      <input class="input" name="ic" placeholder="e.g. 850123-10-5678">

      <div class="label" style="margin-top:10px">Email</div>
      <input class="input" name="email" placeholder="name@example.com">
      <div class="label" style="margin-top:10px">Phone</div>
      <input class="input" name="phone" placeholder="+60...">
    </div>

    <div class="card">
      <div class="label">Upload Identification (PDF/JPG/PNG)</div>
      <input class="input" type="file" id="icFile" accept=".pdf,.jpg,.jpeg,.png">
      <div class="label" style="margin-top:10px">Upload SSM (if company)</div>
      <input class="input" type="file" id="ssmFile" accept=".pdf,.jpg,.jpeg,.png">
      <div style="margin-top:12px; display:flex; gap:10px">
        <button class="btn primary" id="submitBtn">Submit</button>
        <a class="btn ghost" href="/loans/page">â† Back to Loans</a>
      </div>
      <div id="msg" class="meta" style="margin-top:10px"></div>
    </div>
  </div>

  <script>
    document.getElementById('submitBtn').addEventListener('click', async ()=>{
      const fd = new FormData();
      fd.append('name', document.querySelector('[name=name]').value||'');
      fd.append('ic', document.querySelector('[name=ic]').value||'');
      fd.append('email', document.querySelector('[name=email]').value||'');
      fd.append('phone', document.querySelector('[name=phone]').value||'');
      if(document.getElementById('icFile').files[0]) fd.append('ic_file', document.getElementById('icFile').files[0]);
      if(document.getElementById('ssmFile').files[0]) fd.append('ssm_file', document.getElementById('ssmFile').files[0]);

      const res = await fetch('/ctos/submit?key={{ portal_key or "demo" }}', {method:'POST', body:fd});
      const j = await res.json().catch(()=>({ok:false}));
      document.getElementById('msg').textContent = res.ok ? 'Submitted. Ticket: '+(j.ticket||'ok') : 'Failed.';
      if(res.ok) setTimeout(()=>location.href='/loans/compare/page', 600);
    });
  </script>
{% endblock %}


â¸»

accounting_app/templates/loans_top3_cards.html

{% extends "base.html" %}
{% block title %}Top-3 Picks Â· INFINITE GZ{% endblock %}
{% block content %}
  <h1 class="section">Top-3 Picks Today</h1>
  <div id="cards" class="grid-3">
    <!-- JS æ¸²æŸ“ -->
  </div>

  <script>
    async function add(product){
      await fetch('/loans/compare/add',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({product})});
      alert('Added to Compare: '+product);
    }

    function cardHTML(r, i){
      const crown = i===0 ? ' ğŸ‘‘' : '';
      return `
        <div class="card tile">
          <div>
            <div class="section">#${i+1}${crown} Â· ${r.bank} Â· ${r.product}</div>
            <div class="meta">APR ${r.apr}% Â· Score ${r.score} Â· Sentiment ${r.sentiment}</div>
            <div class="meta">Preferred: ${r.preferred||'-'}</div>
          </div>
          <div>
            <button class="btn primary" onclick="add('${r.product.replace(/'/g,'\\\'')}')">åŠ å…¥æ¯”ä»·</button>
            <a class="btn" href="/loans/ranking/pdf" target="_blank">ä¸‹è½½Top-3 PDF</a>
          </div>
        </div>
      `;
    }

    async function init(){
      const r = await fetch('/loans/ranking');
      const list = await r.json();
      const html = list.slice(0,3).map((x,idx)=>cardHTML(x,idx)).join('');
      document.getElementById('cards').innerHTML = html;
    }
    init();
  </script>
{% endblock %}


â¸»

è¦†ç›–ä¸éªŒè¯ï¼ˆä¸€æ­¥åˆ°ä½ï¼‰
	1.	æŠŠä¸Šé¢å…­ä¸ªæ–‡ä»¶æŒ‰è·¯å¾„è´´è¿›é¡¹ç›®ï¼š

	â€¢	accounting_app/static/css/brand.css
	â€¢	accounting_app/templates/base.html
	â€¢	accounting_app/templates/portal.html
	â€¢	accounting_app/templates/history.html
	â€¢	accounting_app/templates/ctos_form.html
	â€¢	accounting_app/templates/loans_top3_cards.html

	2.	åœ¨ main.py æ¸²æŸ“æ—¶ä¼  envï¼ˆå·²ä¼ å°±å¿½ç•¥ï¼‰ï¼š

# ç¤ºä¾‹
return templates.TemplateResponse("portal.html", {"request": request, "env": os.getenv("ENV","prod"), "portal_key": os.getenv("PORTAL_KEY"), "admin_key": os.getenv("ADMIN_KEY")})

	3.	é¢„è§ˆå¹¶éªŒæ”¶ï¼ˆæµè§ˆå™¨ï¼‰ï¼š

	â€¢	/portal åº”æ˜¾ç¤ºæ–°ç½‘æ ¼ä¸åŒè¯­æŒ‰é’®
	â€¢	/loans/top3/cards ä¸‰å¼ å¤§å¡ç‰‡ï¼ˆåŠ å…¥æ¯”ä»·æ­£å¸¸ï¼‰
	â€¢	/ctos/page?key=... æ–°ç‰ˆè¡¨å•å¯æäº¤
	â€¢	/docs/official/CREDITPILOT_ä¼ä¸šæŠ¥å‘Š_EN.pdf / ..._CN.pdf å¯ä¸‹è½½

å¦‚æœå“ªä¸€å—æ ·å¼ä½ æƒ³å¾®è°ƒï¼ˆå­—å·ã€ç²—ç»†ã€é¢œè‰²ï¼‰ï¼Œåªæ”¹ brand.css çš„å˜é‡æˆ–å…¬å…±ç±»å°±è¡Œï¼›å…¨ç«™è”åŠ¨ã€‚
æœ‰åˆ«çš„é¡µé¢è¦ç»Ÿä¸€ï¼Œä¹Ÿç”¨è¿™å¥—ç»„ä»¶å»åŒ…ä¸€ä¸‹å°±å¥½äº†ã€‚
# ğŸ“‹ ä¼šè®¡ç³»ç»Ÿå®Œæ•´æµ‹è¯•æŒ‡å—
## Accounting & Audit System Testing Guide

---

## ğŸ¯ æµ‹è¯•ç›®æ ‡
éªŒè¯é“¶è¡Œè´·æ¬¾åˆè§„ä¼šè®¡ç³»ç»Ÿçš„æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½ï¼š
- âœ… é“¶è¡Œæœˆç»“å•CSVå¯¼å…¥
- âœ… è‡ªåŠ¨ç”Ÿæˆä¼šè®¡åˆ†å½•ï¼ˆJournal Entriesï¼‰
- âœ… ä¾›åº”å•†è´¦é¾„æŠ¥è¡¨ï¼ˆSuppliers Agingï¼‰
- âœ… å®¢æˆ·åº”æ”¶è´¦æ¬¾å°è´¦ï¼ˆCustomer Ledgerï¼‰
- âœ… æŸç›Šè¡¨ï¼ˆP&L Statementï¼‰
- âœ… èµ„äº§è´Ÿå€ºè¡¨ï¼ˆBalance Sheetï¼‰
- âœ… è¯•ç®—è¡¨ï¼ˆTrial Balanceï¼‰
- âœ… é“¶è¡Œè´·æ¬¾èµ„æ–™åŒ…ç”Ÿæˆï¼ˆBank Packageï¼‰

---

## ğŸ“ å‰ç½®å‡†å¤‡

### 1. ç¡®è®¤ç³»ç»Ÿè¿è¡ŒçŠ¶æ€
**æ“ä½œæ­¥éª¤ï¼š**
1. åœ¨Replitç•Œé¢æŸ¥çœ‹å³ä¸Šè§’çš„workflowsçŠ¶æ€
2. ç¡®è®¤ä»¥ä¸‹2ä¸ªæœåŠ¡éƒ½æ˜¾ç¤ºç»¿è‰²"RUNNING"ï¼š
   - âœ… **Accounting API** (FastAPI - ç«¯å£8000)
   - âœ… **Server** (Flask - ç«¯å£5000)

**é¢„æœŸç»“æœï¼š**
- ä¸¤ä¸ªæœåŠ¡éƒ½åœ¨è¿è¡Œ
- æ§åˆ¶å°æ²¡æœ‰æŠ¥é”™

---

## ğŸ§ª æµ‹è¯•æµç¨‹ 1ï¸âƒ£ï¼šè®¿é—®ç³»ç»Ÿç•Œé¢

### æµ‹è¯•1.1ï¼šè®¿é—®APIæ–‡æ¡£ï¼ˆSwagger UIï¼‰
**æ“ä½œæ­¥éª¤ï¼š**
1. ç‚¹å‡»Replitå³ä¸Šè§’çš„"Webview"æŒ‰é’®æ‰“å¼€é¢„è§ˆçª—å£
2. åœ¨åœ°å€æ ä¿®æ”¹URLä¸ºï¼š`/docs`ï¼ˆå®Œæ•´åœ°å€ç±»ä¼¼ï¼š`https://your-repl.repl.co:8000/docs`ï¼‰
3. ç­‰å¾…é¡µé¢åŠ è½½

**é¢„æœŸç»“æœï¼š**
- âœ… çœ‹åˆ°FastAPIè‡ªåŠ¨ç”Ÿæˆçš„APIæ–‡æ¡£ç•Œé¢ï¼ˆç´«è‰²/è“è‰²ä¸»é¢˜ï¼‰
- âœ… çœ‹åˆ°5ä¸ªä¸»è¦åˆ†ç±»ï¼š
  - **Companies** - å…¬å¸ç®¡ç†
  - **Bank Import** - é“¶è¡Œå¯¼å…¥
  - **Reports** - æŠ¥è¡¨
  - **Invoices** - å‘ç¥¨
  - **Scheduled Tasks** - å®šæ—¶ä»»åŠ¡
- âœ… æ¯ä¸ªåˆ†ç±»å¯ä»¥å±•å¼€æŸ¥çœ‹APIæ¥å£

**æˆªå›¾éªŒè¯ç‚¹ï¼š**
- é¡µé¢æ ‡é¢˜ï¼š`Loan-Ready Accounting System - Swagger UI`
- ç‰ˆæœ¬å·ï¼š`1.0.0`

---

### æµ‹è¯•1.2ï¼šè®¿é—®ç®¡ç†åå°ç•Œé¢
**æ“ä½œæ­¥éª¤ï¼š**
1. åœ¨Webviewåœ°å€æ ä¿®æ”¹URLä¸ºï¼š`/accounting`
2. ç­‰å¾…é¡µé¢åŠ è½½

**é¢„æœŸç»“æœï¼š**
- âœ… çœ‹åˆ°ç´«è‰²æ¸å˜èƒŒæ™¯çš„ç®¡ç†ç•Œé¢
- âœ… é¡µé¢æ ‡é¢˜ï¼š`ğŸ¦ é“¶è¡Œè´·æ¬¾åˆè§„ä¼šè®¡ç³»ç»Ÿ`
- âœ… å‰¯æ ‡é¢˜ï¼š`å°†é“¶è¡Œæœˆç»“å•è½¬æ¢ä¸ºä¼šè®¡åˆ†å½•ï¼Œç”Ÿæˆé“¶è¡Œè´·æ¬¾æ‰€éœ€çš„è´¢åŠ¡æŠ¥è¡¨`
- âœ… çœ‹åˆ°4ä¸ªåŠŸèƒ½å¡ç‰‡ï¼š
  1. ğŸ“¤ ä¸Šä¼ é“¶è¡Œæœˆç»“å•
  2. ğŸ“Š ä¾›åº”å•†è´¦é¾„æŠ¥è¡¨
  3. ğŸ’° æŸç›Šè¡¨ (P&L)
  4. ğŸ“¦ é“¶è¡Œè´·æ¬¾èµ„æ–™åŒ…

**æˆªå›¾éªŒè¯ç‚¹ï¼š**
- ç™½è‰²å¡ç‰‡ï¼Œåœ†è§’è®¾è®¡
- æ¯ä¸ªè¡¨å•éƒ½æœ‰æ¸…æ™°çš„æ ‡ç­¾å’Œè¾“å…¥æ¡†

---

## ğŸ§ª æµ‹è¯•æµç¨‹ 2ï¸âƒ£ï¼šéªŒè¯é»˜è®¤æ•°æ®

### æµ‹è¯•2.1ï¼šæ£€æŸ¥é»˜è®¤å…¬å¸æ˜¯å¦åˆ›å»º
**æ“ä½œæ­¥éª¤ï¼ˆä½¿ç”¨APIæ–‡æ¡£ï¼‰ï¼š**
1. åœ¨ `/docs` é¡µé¢æ‰¾åˆ° **Companies** åˆ†ç±»
2. å±•å¼€ `GET /api/companies/` æ¥å£
3. ç‚¹å‡»å³ä¾§ **"Try it out"** æŒ‰é’®
4. ç‚¹å‡»è“è‰² **"Execute"** æŒ‰é’®
5. å‘ä¸‹æ»šåŠ¨æŸ¥çœ‹ **Response body**

**é¢„æœŸç»“æœï¼š**
```json
{
  "companies": [
    {
      "id": 1,  // æ³¨æ„ï¼šè¿™ä¸ªIDå¯èƒ½ä¸æ˜¯1ï¼Œå¯èƒ½æ˜¯å…¶ä»–æ•°å­—
      "company_code": "DEFAULT",
      "company_name": "é»˜è®¤å…¬å¸ (Default Company)",
      "registration_number": "DEMO001",
      "status": "active"
    }
  ],
  "total": 1
}
```

**å…³é”®éªŒè¯ç‚¹ï¼š**
- âœ… è¿”å›çŠ¶æ€ç ï¼š`200`
- âœ… `company_code` = `"DEFAULT"`
- âœ… `status` = `"active"`
- âœ… **è®°å½•ä¸‹`id`çš„å€¼**ï¼ˆåç»­æµ‹è¯•ä¼šç”¨åˆ°ï¼Œå‡è®¾æ˜¯1ï¼‰

---

### æµ‹è¯•2.2ï¼šæ£€æŸ¥é»˜è®¤ä¼šè®¡ç§‘ç›®æ˜¯å¦åˆ›å»º
**æ“ä½œæ­¥éª¤ï¼š**
1. åœ¨ `/docs` é¡µé¢æ‰¾åˆ° **Companies** åˆ†ç±»
2. å±•å¼€ `GET /api/companies/{company_id}/chart-of-accounts` æ¥å£
3. ç‚¹å‡» **"Try it out"**
4. åœ¨ `company_id` è¾“å…¥æ¡†å¡«å†™ï¼š`1`ï¼ˆæˆ–ä½ åœ¨2.1è®°å½•çš„idï¼‰
5. ç‚¹å‡» **"Execute"**

**é¢„æœŸç»“æœï¼š**
```json
{
  "accounts": [
    {
      "id": 1,
      "account_code": "bank",
      "account_name": "é“¶è¡Œå­˜æ¬¾ (Bank)",
      "account_type": "asset"
    },
    {
      "id": 2,
      "account_code": "accounts_receivable",
      "account_name": "åº”æ”¶è´¦æ¬¾ (Accounts Receivable)",
      "account_type": "asset"
    },
    // ... åº”è¯¥æœ‰13ä¸ªè´¦æˆ·
  ],
  "total": 13
}
```

**å…³é”®éªŒè¯ç‚¹ï¼š**
- âœ… è¿”å›çŠ¶æ€ç ï¼š`200`
- âœ… `total` = `13`ï¼ˆ13ä¸ªé»˜è®¤ä¼šè®¡ç§‘ç›®ï¼‰
- âœ… åŒ…å«ä»¥ä¸‹å…³é”®è´¦æˆ·ä»£ç ï¼š
  - `bank` (èµ„äº§)
  - `salary_expense` (è´¹ç”¨)
  - `epf_payable` (è´Ÿå€º)
  - `service_income` (æ”¶å…¥)

**å¦‚æœtotal=0æˆ–è´¦æˆ·ä¸ºç©ºï¼š**
âŒ è¯´æ˜ç§å­æ•°æ®æœªæ­£ç¡®æ’å…¥ï¼Œè¯·è”ç³»æˆ‘ä¿®å¤

---

## ğŸ§ª æµ‹è¯•æµç¨‹ 3ï¸âƒ£ï¼šä¸Šä¼ é“¶è¡Œæœˆç»“å•

### æµ‹è¯•3.1ï¼šå‡†å¤‡æµ‹è¯•CSVæ–‡ä»¶
**æ“ä½œæ­¥éª¤ï¼š**
1. åœ¨Replitå·¦ä¾§æ–‡ä»¶æ ‘ä¸­æ‰¾åˆ°ï¼š`accounting_app/static/sample_bank_statement.csv`
2. å³é”®ç‚¹å‡»æ–‡ä»¶ â†’ é€‰æ‹© **Download** ä¸‹è½½åˆ°æœ¬åœ°
3. ï¼ˆå¯é€‰ï¼‰ç”¨Excelæˆ–æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€æŸ¥çœ‹å†…å®¹

**æ–‡ä»¶å†…å®¹é¢„è§ˆï¼š**
```csv
Date,Description,Reference,Debit,Credit,Balance
2025-01-05,SALARY PAYMENT JANUARY,SAL001,15000.00,0.00,85000.00
2025-01-10,EPF CONTRIBUTION,EPF001,2000.00,0.00,83000.00
2025-01-12,SOCSO CONTRIBUTION,SOC001,500.00,0.00,82500.00
2025-01-15,OFFICE RENT PAYMENT,RENT001,3000.00,0.00,79500.00
2025-01-20,SUPPLIER PAYMENT - HUAWEI,INV123,7500.00,0.00,72000.00
2025-01-22,CUSTOMER DEPOSIT,DEP001,0.00,50000.00,122000.00
2025-01-25,UTILITIES PAYMENT,UTIL001,800.00,0.00,121200.00
2025-01-28,TRANSFER TO SAVINGS,TRF001,20000.00,0.00,101200.00
2025-01-30,SERVICE FEE INCOME,SRV001,0.00,5000.00,106200.00
```

**éªŒè¯ç‚¹ï¼š**
- âœ… æ–‡ä»¶æœ‰9ç¬”äº¤æ˜“
- âœ… åŒ…å«salary, EPF, SOCSO, rent, utilitiesç­‰å…³é”®è¯
- âœ… æœ‰å€Ÿæ–¹(Debit)å’Œè´·æ–¹(Credit)é‡‘é¢

---

### æµ‹è¯•3.2ï¼šä½¿ç”¨å‰ç«¯ç•Œé¢ä¸Šä¼ CSV
**æ“ä½œæ­¥éª¤ï¼š**
1. è®¿é—® `/accounting` ç®¡ç†åå°
2. åœ¨ç¬¬ä¸€ä¸ªå¡ç‰‡ **"ğŸ“¤ ä¸Šä¼ é“¶è¡Œæœˆç»“å•"** ä¸­å¡«å†™ï¼š
   - **å…¬å¸ID**ï¼š`1`ï¼ˆæˆ–ä½ åœ¨2.1è®°å½•çš„idï¼‰
   - **é“¶è¡Œåç§°**ï¼š`Maybank`
   - **è´¦æˆ·å·ç **ï¼š`1234567890`
   - **æœˆä»½**ï¼š`2025-01`
   - **CSVæ–‡ä»¶**ï¼šç‚¹å‡»"é€‰æ‹©æ–‡ä»¶"ï¼Œä¸Šä¼ åˆšä¸‹è½½çš„`sample_bank_statement.csv`
3. ç‚¹å‡»è“è‰²æŒ‰é’® **"ä¸Šä¼ å¹¶å¯¼å…¥"**
4. ç­‰å¾…3-5ç§’

**é¢„æœŸç»“æœï¼ˆæˆåŠŸæƒ…å†µï¼‰ï¼š**
- âœ… å¡ç‰‡ä¸‹æ–¹å‡ºç°ç»¿è‰²èƒŒæ™¯çš„ç»“æœæ¡†
- âœ… æ˜¾ç¤ºç±»ä¼¼å†…å®¹ï¼š
```json
{
  "message": "é“¶è¡Œæœˆç»“å•å¯¼å…¥æˆåŠŸ",
  "company_id": 1,
  "statement_month": "2025-01",
  "total_transactions": 9,
  "matched_count": 7,  // è‡ªåŠ¨åŒ¹é…æˆåŠŸçš„äº¤æ˜“æ•°é‡
  "unmatched_count": 2  // æœªåŒ¹é…çš„äº¤æ˜“ï¼ˆå¦‚TRANSFERå’ŒHUAWEIï¼‰
}
```

**å…³é”®éªŒè¯ç‚¹ï¼š**
- âœ… `total_transactions` = `9`ï¼ˆå…¨éƒ¨å¯¼å…¥ï¼‰
- âœ… `matched_count` >= `6`ï¼ˆè‡³å°‘åŒ¹é…6ç¬”ï¼šsalary, EPF, SOCSO, rent, utilities, deposit/serviceï¼‰
- âœ… çŠ¶æ€ç 200ï¼Œæ— æŠ¥é”™

**é¢„æœŸç»“æœï¼ˆå¤±è´¥æƒ…å†µ - å¦‚æœä¼šè®¡ç§‘ç›®ç¼ºå¤±ï¼‰ï¼š**
- âŒ æ˜¾ç¤ºçº¢è‰²é”™è¯¯ï¼š`"ä¼šè®¡ç§‘ç›®ä¸å­˜åœ¨..."`
- ğŸ‘‰ è¯´æ˜ç§å­æ•°æ®æœ‰é—®é¢˜ï¼Œè¿”å›æµ‹è¯•2.2æ£€æŸ¥

---

### æµ‹è¯•3.3ï¼šä½¿ç”¨APIæ–‡æ¡£ä¸Šä¼ CSVï¼ˆå¤‡é€‰æ–¹æ³•ï¼‰
**æ“ä½œæ­¥éª¤ï¼š**
1. åœ¨ `/docs` é¡µé¢æ‰¾åˆ° **Bank Import** åˆ†ç±»
2. å±•å¼€ `POST /api/import/bank-statement` æ¥å£
3. ç‚¹å‡» **"Try it out"**
4. å¡«å†™æŸ¥è¯¢å‚æ•°ï¼š
   - `company_id`: `1`
   - `bank_name`: `Maybank`
   - `account_number`: `1234567890`
   - `statement_month`: `2025-01`
5. åœ¨ **file** ä¸Šä¼ æ¡†ç‚¹å‡»"Choose File"ï¼Œé€‰æ‹©CSV
6. ç‚¹å‡» **"Execute"**

**é¢„æœŸç»“æœï¼š**
- åŒæµ‹è¯•3.2

---

## ğŸ§ª æµ‹è¯•æµç¨‹ 4ï¸âƒ£ï¼šéªŒè¯è‡ªåŠ¨ç”Ÿæˆçš„ä¼šè®¡åˆ†å½•

### æµ‹è¯•4.1ï¼šæŸ¥çœ‹é“¶è¡Œæµæ°´åŒ¹é…çŠ¶æ€
**æ“ä½œæ­¥éª¤ï¼ˆä½¿ç”¨APIæ–‡æ¡£ï¼‰ï¼š**
1. åœ¨ `/docs` æ‰¾åˆ° **Reports** åˆ†ç±»
2. å±•å¼€ `GET /api/reports/bank-transactions` æ¥å£
3. ç‚¹å‡» **"Try it out"**
4. å¡«å†™å‚æ•°ï¼š
   - `company_id`: `1`
   - `statement_month`: `2025-01`
5. ç‚¹å‡» **"Execute"**

**é¢„æœŸç»“æœï¼š**
```json
{
  "transactions": [
    {
      "id": 1,
      "transaction_date": "2025-01-05",
      "description": "SALARY PAYMENT JANUARY",
      "debit_amount": 15000.00,
      "credit_amount": 0,
      "matched": true,  // âœ… å·²åŒ¹é…
      "auto_category": "salary",  // âœ… è‡ªåŠ¨åˆ†ç±»
      "matched_journal_id": 1  // âœ… å…³è”çš„ä¼šè®¡åˆ†å½•ID
    },
    {
      "id": 2,
      "transaction_date": "2025-01-10",
      "description": "EPF CONTRIBUTION",
      "debit_amount": 2000.00,
      "matched": true,
      "auto_category": "epf"
    },
    // ... å…¶ä½™7ç¬”äº¤æ˜“
  ],
  "total": 9,
  "matched_count": 7,
  "unmatched_count": 2
}
```

**å…³é”®éªŒè¯ç‚¹ï¼š**
- âœ… `matched` = `true` çš„äº¤æ˜“åº”è¯¥æœ‰`auto_category`
- âœ… SALARY â†’ `salary`
- âœ… EPF â†’ `epf`
- âœ… SOCSO â†’ `socso`
- âœ… RENT â†’ `rental`æˆ–`rent`
- âœ… UTILITIES â†’ `util`æˆ–`utilities`
- âœ… DEPOSIT â†’ `deposit`
- âœ… SERVICE â†’ `service`

---

### æµ‹è¯•4.2ï¼šæŸ¥çœ‹ç”Ÿæˆçš„Journal Entriesï¼ˆä¼šè®¡åˆ†å½•ï¼‰
**æ“ä½œæ­¥éª¤ï¼š**
1. åœ¨ `/docs` æ‰¾åˆ° **Reports** åˆ†ç±»
2. å±•å¼€ `GET /api/reports/journal-entries` æ¥å£
3. ç‚¹å‡» **"Try it out"**
4. å¡«å†™å‚æ•°ï¼š
   - `company_id`: `1`
   - `year`: `2025`
   - `month`: `1`
5. ç‚¹å‡» **"Execute"**

**é¢„æœŸç»“æœï¼š**
```json
{
  "journal_entries": [
    {
      "id": 1,
      "entry_number": "JE-20251031-123456-1",
      "entry_date": "2025-01-05",
      "description": "Bank Import: SALARY PAYMENT JANUARY",
      "entry_type": "bank_import",
      "status": "posted",
      "lines": [
        {
          "account_code": "salary_expense",
          "account_name": "å·¥èµ„æ”¯å‡º (Salary Expense)",
          "debit_amount": 15000.00,
          "credit_amount": 0
        },
        {
          "account_code": "bank",
          "account_name": "é“¶è¡Œå­˜æ¬¾ (Bank)",
          "debit_amount": 0,
          "credit_amount": 15000.00
        }
      ],
      "total_debit": 15000.00,
      "total_credit": 15000.00,
      "balanced": true  // âœ… å€Ÿè´·å¹³è¡¡
    }
    // ... å…¶ä½™åˆ†å½•
  ],
  "total": 7  // 7ä¸ªJournal Entryï¼ˆåŒ¹é…æˆåŠŸçš„7ç¬”ï¼‰
}
```

**å…³é”®éªŒè¯ç‚¹ï¼š**
- âœ… æ¯ä¸ªJournal Entryæœ‰2æ¡linesï¼ˆå€Ÿæ–¹+è´·æ–¹ï¼‰
- âœ… `total_debit` = `total_credit`ï¼ˆå€Ÿè´·å¹³è¡¡ï¼‰
- âœ… `balanced` = `true`
- âœ… SALARYåˆ†å½•ï¼šå€Ÿsalary_expenseï¼Œè´·bank
- âœ… EPFåˆ†å½•ï¼šå€Ÿepf_payableï¼Œè´·bank
- âœ… RENTåˆ†å½•ï¼šå€Ÿrent_expenseï¼Œè´·bank

---

## ğŸ§ª æµ‹è¯•æµç¨‹ 5ï¸âƒ£ï¼šæŸ¥çœ‹è´¢åŠ¡æŠ¥è¡¨

### æµ‹è¯•5.1ï¼šè¯•ç®—è¡¨ï¼ˆTrial Balanceï¼‰
**æ“ä½œæ­¥éª¤ï¼š**
1. åœ¨ `/docs` æ‰¾åˆ° **Reports** åˆ†ç±»
2. å±•å¼€ `GET /api/reports/trial-balance` æ¥å£
3. ç‚¹å‡» **"Try it out"**
4. å¡«å†™å‚æ•°ï¼š
   - `company_id`: `1`
   - `year`: `2025`
   - `month`: `1`
5. ç‚¹å‡» **"Execute"**

**é¢„æœŸç»“æœï¼š**
```json
{
  "period": "2025-01",
  "accounts": [
    {
      "account_code": "bank",
      "account_name": "é“¶è¡Œå­˜æ¬¾ (Bank)",
      "debit": 50000.00,  // æ”¶å…¥ç±»ï¼ˆDEPOSIT + SERVICEï¼‰
      "credit": 48300.00,  // æ”¯å‡ºç±»ï¼ˆSALARY+EPF+SOCSO+RENT+UTILITIESï¼‰
      "balance": 1700.00
    },
    {
      "account_code": "salary_expense",
      "account_name": "å·¥èµ„æ”¯å‡º (Salary Expense)",
      "debit": 15000.00,
      "credit": 0,
      "balance": 15000.00
    }
    // ... å…¶ä½™è´¦æˆ·
  ],
  "total_debits": 98300.00,  // ç¤ºä¾‹å€¼
  "total_credits": 98300.00,  // âœ… åº”è¯¥ç›¸ç­‰
  "balanced": true,  // âœ… å¿…é¡»ä¸ºtrue
  "variance": 0.00  // âœ… åº”è¯¥æ˜¯0æˆ–æ¥è¿‘0
}
```

**å…³é”®éªŒè¯ç‚¹ï¼š**
- âœ… `balanced` = `true`
- âœ… `total_debits` = `total_credits`
- âœ… `variance` <= 0.01ï¼ˆå…è®¸0.01çš„æµ®ç‚¹è¯¯å·®ï¼‰
- âœ… æ¯ä¸ªè´¦æˆ·çš„`balance` = `debit` - `credit`

**âŒ å¦‚æœtotal_debitsâ‰ total_creditsï¼š**
- è¯´æ˜ä¼šè®¡åˆ†å½•æœ‰é—®é¢˜ï¼Œè¿”å›æµ‹è¯•4.2æ£€æŸ¥

---

### æµ‹è¯•5.2ï¼šæŸç›Šè¡¨ï¼ˆP&L Statementï¼‰
**æ“ä½œæ­¥éª¤ï¼ˆä½¿ç”¨å‰ç«¯ç•Œé¢ï¼‰ï¼š**
1. è®¿é—® `/accounting` ç®¡ç†åå°
2. åœ¨ç¬¬ä¸‰ä¸ªå¡ç‰‡ **"ğŸ’° æŸç›Šè¡¨ (P&L)"** ä¸­å¡«å†™ï¼š
   - **å…¬å¸ID**ï¼š`1`
   - **å¹´ä»½**ï¼š`2025`
   - **æœˆä»½**ï¼š`1`
3. ç‚¹å‡» **"æŸ¥çœ‹æŠ¥è¡¨"**

**é¢„æœŸç»“æœï¼š**
```json
{
  "company_name": "é»˜è®¤å…¬å¸ (Default Company)",
  "period": "2025-01",
  "income": {
    "service_income": 5000.00,
    "deposit_income": 50000.00,
    "total_income": 55000.00
  },
  "expenses": {
    "salary_expense": 15000.00,
    "epf_payable": 2000.00,
    "socso_payable": 500.00,
    "rent_expense": 3000.00,
    "utilities_expense": 800.00,
    "total_expenses": 21300.00
  },
  "net_profit": 33700.00,  // âœ… æ”¶å…¥ - æ”¯å‡º
  "profit_margin": 61.27  // âœ… (å‡€åˆ©æ¶¦/æ€»æ”¶å…¥)Ã—100
}
```

**å…³é”®éªŒè¯ç‚¹ï¼š**
- âœ… `total_income` = æ‰€æœ‰incomeé¡¹ä¹‹å’Œ
- âœ… `total_expenses` = æ‰€æœ‰expenseé¡¹ä¹‹å’Œ
- âœ… `net_profit` = `total_income` - `total_expenses`
- âœ… æ•°å­—åˆç†ï¼ˆåŸºäºå¯¼å…¥çš„CSVæ•°æ®ï¼‰

---

### æµ‹è¯•5.3ï¼šèµ„äº§è´Ÿå€ºè¡¨ï¼ˆBalance Sheetï¼‰
**æ“ä½œæ­¥éª¤ï¼š**
1. åœ¨ `/docs` æ‰¾åˆ° **Reports** åˆ†ç±»
2. å±•å¼€ `GET /api/reports/balance-sheet` æ¥å£
3. ç‚¹å‡» **"Try it out"**
4. å¡«å†™å‚æ•°ï¼š
   - `company_id`: `1`
   - `as_of_date`: `2025-01-31`ï¼ˆå¯é€‰ï¼Œç•™ç©ºåˆ™ç”¨å½“å‰æ—¥æœŸï¼‰
5. ç‚¹å‡» **"Execute"**

**é¢„æœŸç»“æœï¼š**
```json
{
  "company_name": "é»˜è®¤å…¬å¸ (Default Company)",
  "as_of_date": "2025-01-31",
  "assets": {
    "bank": 1700.00,
    "accounts_receivable": 0,
    "total_assets": 1700.00
  },
  "liabilities": {
    "accounts_payable": 0,
    "epf_payable": 2000.00,
    "socso_payable": 500.00,
    "total_liabilities": 2500.00
  },
  "equity": {
    "retained_earnings": 33700.00,  // ä»P&Lçš„å‡€åˆ©æ¶¦
    "total_equity": 33700.00
  },
  "total_liabilities_and_equity": 36200.00,
  "balanced": true  // âœ… èµ„äº§ = è´Ÿå€º + æƒç›Š
}
```

**å…³é”®éªŒè¯ç‚¹ï¼š**
- âœ… `total_assets` = `total_liabilities` + `total_equity`
- âœ… `balanced` = `true`

---

### æµ‹è¯•5.4ï¼šä¾›åº”å•†è´¦é¾„æŠ¥è¡¨ï¼ˆSuppliers Agingï¼‰
**æ“ä½œæ­¥éª¤ï¼ˆä½¿ç”¨å‰ç«¯ç•Œé¢ï¼‰ï¼š**
1. è®¿é—® `/accounting` ç®¡ç†åå°
2. åœ¨ç¬¬äºŒä¸ªå¡ç‰‡ **"ğŸ“Š ä¾›åº”å•†è´¦é¾„æŠ¥è¡¨"** ä¸­å¡«å†™ï¼š
   - **å…¬å¸ID**ï¼š`1`
   - **æˆªæ­¢æ—¥æœŸ**ï¼šç•™ç©ºï¼ˆä½¿ç”¨å½“å‰æ—¥æœŸï¼‰
3. ç‚¹å‡» **"æŸ¥çœ‹æŠ¥è¡¨"**

**é¢„æœŸç»“æœï¼ˆå¦‚æœæ²¡æœ‰ä¾›åº”å•†æ•°æ®ï¼‰ï¼š**
```json
{
  "company_name": "é»˜è®¤å…¬å¸ (Default Company)",
  "as_of_date": "2025-10-31",
  "suppliers": [],
  "total": 0,
  "summary": {
    "total_amount": 0,
    "aging_0_30": 0,
    "aging_31_60": 0,
    "aging_61_90": 0,
    "aging_over_90": 0
  }
}
```

**è¯´æ˜ï¼š**
- âœ… æ­£å¸¸æ˜¾ç¤ºç©ºæŠ¥è¡¨ï¼ˆå› ä¸ºæˆ‘ä»¬åªå¯¼å…¥äº†é“¶è¡Œæµæ°´ï¼Œæ²¡æœ‰åˆ›å»ºä¾›åº”å•†å‘ç¥¨ï¼‰
- âœ… å¦‚æœè¦æµ‹è¯•å®Œæ•´åŠŸèƒ½ï¼Œéœ€è¦å…ˆåˆ›å»ºä¾›åº”å•†å’Œå‘ç¥¨æ•°æ®

---

## ğŸ§ª æµ‹è¯•æµç¨‹ 6ï¸âƒ£ï¼šé“¶è¡Œè´·æ¬¾èµ„æ–™åŒ…

### æµ‹è¯•6.1ï¼šç”Ÿæˆå®Œæ•´çš„é“¶è¡Œè´·æ¬¾èµ„æ–™åŒ…
**æ“ä½œæ­¥éª¤ï¼ˆä½¿ç”¨å‰ç«¯ç•Œé¢ï¼‰ï¼š**
1. è®¿é—® `/accounting` ç®¡ç†åå°
2. åœ¨ç¬¬å››ä¸ªå¡ç‰‡ **"ğŸ“¦ é“¶è¡Œè´·æ¬¾èµ„æ–™åŒ…"** ä¸­å¡«å†™ï¼š
   - **å…¬å¸ID**ï¼š`1`
3. ç‚¹å‡» **"ç”Ÿæˆèµ„æ–™åŒ…"**

**é¢„æœŸç»“æœï¼š**
```json
{
  "company": {
    "company_name": "é»˜è®¤å…¬å¸ (Default Company)",
    "registration_number": "DEMO001"
  },
  "generated_at": "2025-10-31T18:45:00",
  "reports": {
    "profit_and_loss": {
      "period": "2025-01",
      "net_profit": 33700.00
    },
    "balance_sheet": {
      "as_of_date": "2025-01-31",
      "total_assets": 1700.00,
      "total_liabilities": 2500.00,
      "total_equity": 33700.00
    },
    "trial_balance": {
      "period": "2025-01",
      "balanced": true,
      "total_debits": 98300.00,
      "total_credits": 98300.00
    },
    "suppliers_aging": {
      "total_suppliers": 0,
      "total_amount": 0
    }
  },
  "summary": {
    "total_revenue": 55000.00,
    "total_expenses": 21300.00,
    "net_position": 33700.00,
    "quick_ratio": "N/A",
    "debt_to_equity": 0.07
  }
}
```

**å…³é”®éªŒè¯ç‚¹ï¼š**
- âœ… åŒ…å«æ‰€æœ‰4ä¸ªæŠ¥è¡¨
- âœ… æ•°å­—ä¸ä¹‹å‰å•ç‹¬æŸ¥è¯¢çš„æŠ¥è¡¨ä¸€è‡´
- âœ… `trial_balance.balanced` = `true`
- âœ… æ˜¾ç¤ºè´¢åŠ¡æ¯”ç‡ï¼ˆå¦‚debt_to_equityï¼‰

---

## ğŸ§ª æµ‹è¯•æµç¨‹ 7ï¸âƒ£ï¼šé«˜çº§åŠŸèƒ½æµ‹è¯•ï¼ˆå¯é€‰ï¼‰

### æµ‹è¯•7.1ï¼šåˆ›å»ºæ–°å…¬å¸
**æ“ä½œæ­¥éª¤ï¼š**
1. åœ¨ `/docs` æ‰¾åˆ° **Companies** åˆ†ç±»
2. å±•å¼€ `POST /api/companies/` æ¥å£
3. ç‚¹å‡» **"Try it out"**
4. åœ¨Request bodyå¡«å†™ï¼š
```json
{
  "company_code": "TEST001",
  "company_name": "æµ‹è¯•å…¬å¸ Ltd",
  "registration_number": "SSM12345",
  "tax_number": "C1234567890",
  "business_type": "Trading",
  "contact_person": "å¼ ä¸‰",
  "contact_email": "test@example.com"
}
```
5. ç‚¹å‡» **"Execute"**

**é¢„æœŸç»“æœï¼š**
- âœ… çŠ¶æ€ç ï¼š`201 Created`
- âœ… è¿”å›æ–°åˆ›å»ºçš„å…¬å¸ä¿¡æ¯ï¼ŒåŒ…å«`id`

---

### æµ‹è¯•7.2ï¼šä¸ºæ–°å…¬å¸åˆ›å»ºä¼šè®¡ç§‘ç›®
**æ“ä½œæ­¥éª¤ï¼š**
1. åœ¨ `/docs` æ‰¾åˆ° **Companies** åˆ†ç±»
2. å±•å¼€ `POST /api/companies/{company_id}/chart-of-accounts` æ¥å£
3. ç‚¹å‡» **"Try it out"**
4. `company_id`: å¡«å†™7.1åˆ›å»ºçš„å…¬å¸ID
5. Request body:
```json
{
  "account_code": "cash",
  "account_name": "ç°é‡‘",
  "account_type": "asset",
  "description": "åº“å­˜ç°é‡‘"
}
```
6. ç‚¹å‡» **"Execute"**

**é¢„æœŸç»“æœï¼š**
- âœ… çŠ¶æ€ç ï¼š`201 Created`
- âœ… è¿”å›æ–°åˆ›å»ºçš„ä¼šè®¡ç§‘ç›®

---

## âœ… æµ‹è¯•å®Œæˆæ£€æŸ¥æ¸…å•

å®Œæˆä»¥ä¸‹æ‰€æœ‰æµ‹è¯•åï¼Œæ‰“å‹¾ç¡®è®¤ï¼š

### åŸºç¡€åŠŸèƒ½
- [ ] âœ… ç³»ç»Ÿè¿è¡Œï¼ˆ2ä¸ªworkflowéƒ½åœ¨è¿è¡Œï¼‰
- [ ] âœ… APIæ–‡æ¡£å¯è®¿é—®ï¼ˆ`/docs`ï¼‰
- [ ] âœ… ç®¡ç†ç•Œé¢å¯è®¿é—®ï¼ˆ`/accounting`ï¼‰

### æ•°æ®éªŒè¯
- [ ] âœ… DEFAULTå…¬å¸å·²åˆ›å»º
- [ ] âœ… 13ä¸ªé»˜è®¤ä¼šè®¡ç§‘ç›®å·²åˆ›å»º

### æ ¸å¿ƒåŠŸèƒ½
- [ ] âœ… CSVä¸Šä¼ æˆåŠŸï¼ˆ9ç¬”äº¤æ˜“ï¼‰
- [ ] âœ… è‡ªåŠ¨åŒ¹é…æˆåŠŸï¼ˆâ‰¥6ç¬”ï¼‰
- [ ] âœ… Journal Entriesç”Ÿæˆï¼ˆå€Ÿè´·å¹³è¡¡ï¼‰

### æŠ¥è¡¨åŠŸèƒ½
- [ ] âœ… Trial Balanceå¹³è¡¡ï¼ˆtotal_debits = total_creditsï¼‰
- [ ] âœ… P&Læ˜¾ç¤ºæ­£ç¡®ï¼ˆå‡€åˆ©æ¶¦è®¡ç®—æ­£ç¡®ï¼‰
- [ ] âœ… Balance Sheetå¹³è¡¡ï¼ˆèµ„äº§ = è´Ÿå€º+æƒç›Šï¼‰
- [ ] âœ… Suppliers Agingæ­£å¸¸æ˜¾ç¤ºï¼ˆå³ä½¿ä¸ºç©ºï¼‰
- [ ] âœ… Bank PackageåŒ…å«æ‰€æœ‰æŠ¥è¡¨

### é«˜çº§åŠŸèƒ½ï¼ˆå¯é€‰ï¼‰
- [ ] âœ… å¯åˆ›å»ºæ–°å…¬å¸
- [ ] âœ… å¯ä¸ºæ–°å…¬å¸åˆ›å»ºä¼šè®¡ç§‘ç›®

---

## ğŸš¨ å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜1ï¼šä¸Šä¼ CSVåæ˜¾ç¤º"ä¼šè®¡ç§‘ç›®ä¸å­˜åœ¨"
**åŸå› ï¼š** ç§å­æ•°æ®æœªæ­£ç¡®æ’å…¥

**æ’æŸ¥æ­¥éª¤ï¼š**
1. è¿”å›æµ‹è¯•2.2ï¼Œæ£€æŸ¥ä¼šè®¡ç§‘ç›®æ•°é‡
2. å¦‚æœ`total=0`ï¼Œæ‰§è¡Œä»¥ä¸‹SQLä¿®å¤ï¼š
   - åœ¨Replitæ§åˆ¶å°è¿è¡Œï¼š`python -c "from accounting_app.db import execute_sql_file; execute_sql_file('accounting_app/init_db.sql')"`

---

### é—®é¢˜2ï¼šTrial Balanceä¸å¹³è¡¡
**åŸå› ï¼š** ä¼šè®¡åˆ†å½•ç”Ÿæˆæœ‰è¯¯

**æ’æŸ¥æ­¥éª¤ï¼š**
1. è¿”å›æµ‹è¯•4.2ï¼Œæ£€æŸ¥æ¯ä¸ªJournal Entryçš„`balanced`å­—æ®µ
2. æ‰¾å‡º`balanced=false`çš„åˆ†å½•
3. æ£€æŸ¥è¯¥åˆ†å½•çš„`lines`æ˜¯å¦æ­£å¥½æœ‰2æ¡ï¼ˆå€Ÿæ–¹+è´·æ–¹ï¼‰

---

### é—®é¢˜3ï¼šAPIè¿”å›500é”™è¯¯
**åŸå› ï¼š** æ•°æ®åº“è¿æ¥æˆ–æŸ¥è¯¢é”™è¯¯

**æ’æŸ¥æ­¥éª¤ï¼š**
1. æŸ¥çœ‹Replitæ§åˆ¶å°çš„Accounting API workflowæ—¥å¿—
2. æŸ¥æ‰¾çº¢è‰²é”™è¯¯ä¿¡æ¯
3. å°†é”™è¯¯ä¿¡æ¯æä¾›ç»™æˆ‘å¸®ä½ ä¿®å¤

---

## ğŸ“Š æµ‹è¯•æ•°æ®æ±‡æ€»è¡¨

| æµ‹è¯•é¡¹ç›® | é¢„æœŸå€¼ | å®é™…å€¼ | çŠ¶æ€ |
|---------|--------|--------|------|
| é»˜è®¤å…¬å¸æ•°é‡ | 1 | ___ | â¬œ |
| é»˜è®¤ä¼šè®¡ç§‘ç›®æ•°é‡ | 13 | ___ | â¬œ |
| CSVå¯¼å…¥äº¤æ˜“æ•° | 9 | ___ | â¬œ |
| è‡ªåŠ¨åŒ¹é…æˆåŠŸæ•° | â‰¥6 | ___ | â¬œ |
| Journal Entryæ•°é‡ | â‰¥6 | ___ | â¬œ |
| Trial Balanceå¹³è¡¡ | true | ___ | â¬œ |
| P&Lå‡€åˆ©æ¶¦ | ~33,700 | ___ | â¬œ |
| Balance Sheetå¹³è¡¡ | true | ___ | â¬œ |

---

## ğŸ“ æµ‹è¯•å®Œæˆåçš„ä¸‹ä¸€æ­¥

æµ‹è¯•é€šè¿‡åï¼Œä½ å¯ä»¥ï¼š

1. **å¯¼å…¥çœŸå®é“¶è¡Œæ•°æ®**
   - å‡†å¤‡ä½ çš„çœŸå®é“¶è¡ŒCSVï¼ˆæ ¼å¼å‚è€ƒsample_bank_statement.csvï¼‰
   - ä¸Šä¼ å¹¶ç”ŸæˆçœŸå®çš„ä¼šè®¡æŠ¥è¡¨

2. **åˆ›å»ºä½ çš„å…¬å¸**
   - ä½¿ç”¨`POST /api/companies/`åˆ›å»ºä½ çš„å®é™…å…¬å¸
   - ä¸ºå…¬å¸é…ç½®å®Œæ•´çš„ä¼šè®¡ç§‘ç›®

3. **ç”Ÿæˆé“¶è¡Œè´·æ¬¾ç”³è¯·èµ„æ–™**
   - ä½¿ç”¨Bank PackageåŠŸèƒ½ç”Ÿæˆå®Œæ•´çš„è´¢åŠ¡æŠ¥è¡¨åŒ…
   - æäº¤ç»™é“¶è¡Œè¿›è¡Œè´·æ¬¾å®¡æ ¸

4. **é…ç½®å®šæ—¶æœˆç»“**
   - åœ¨Replit Secretsè®¾ç½®`TASK_SECRET_TOKEN`
   - ä½¿ç”¨å¤–éƒ¨å®šæ—¶å™¨ï¼ˆå¦‚UptimeRobotï¼‰æ¯æœˆè‡ªåŠ¨è§¦å‘æœˆç»“

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè¯·æä¾›ï¼š
1. æµ‹è¯•æ­¥éª¤ç¼–å·ï¼ˆå¦‚"æµ‹è¯•3.2"ï¼‰
2. å®é™…æ˜¾ç¤ºçš„é”™è¯¯ä¿¡æ¯
3. Accounting API workflowçš„æ—¥å¿—æˆªå›¾

æˆ‘ä¼šç«‹å³å¸®ä½ è§£å†³ï¼ğŸš€

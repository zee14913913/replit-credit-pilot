{% extends "base.html" %}

{% block title %}æœˆåº¦æ±‡æ€»æŠ¥å‘Š - Monthly Summary Report{% endblock %}

{% block content %}
<div class="container-fluid mt-4">
    <div class="row mb-4">
        <div class="col-12">
            <h1 class="text-center" style="color: #FF007F;">
                <i class="bi bi-calendar3"></i> æœˆåº¦æ±‡æ€»æŠ¥å‘Š
            </h1>
            <p class="text-center" style="color: #FFFFFF;">
                æŒ‰æœˆæŸ¥çœ‹Supplieræ¶ˆè´¹ä¸ä»˜æ¬¾å¯¹è´¦æƒ…å†µï¼Œæ¸…æ™°é€æ˜ï¼Œé¿å…è¯¯ä¼š
            </p>
        </div>
    </div>

    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div style="background: rgba(50, 36, 70, 0.3); border: 1px solid #322446; border-radius: 12px; padding: 30px;">
                
                <!-- å®¢æˆ·é€‰æ‹© -->
                <div class="mb-4">
                    <label class="form-label" style="color: #FF007F; font-weight: bold;">
                        <i class="bi bi-person-circle"></i> é€‰æ‹©å®¢æˆ·
                    </label>
                    <select id="customerSelect" class="form-select" style="background: #000000; color: #FFFFFF; border: 1px solid #322446;">
                        <option value="">-- è¯·é€‰æ‹©å®¢æˆ· --</option>
                        {% for customer in customers %}
                        <option value="{{ customer.id }}">
                            {{ customer.name }} ({{ customer.customer_code }})
                        </option>
                        {% endfor %}
                    </select>
                </div>

                <!-- å¹´ä»½å’Œæœˆä»½é€‰æ‹© -->
                <div class="row mb-4">
                    <div class="col-md-6">
                        <label class="form-label" style="color: #FF007F; font-weight: bold;">
                            <i class="bi bi-calendar-event"></i> å¹´ä»½
                        </label>
                        <select id="yearSelect" class="form-select" style="background: #000000; color: #FFFFFF; border: 1px solid #322446;">
                            {% for year in years %}
                            <option value="{{ year }}" {% if year == current_year %}selected{% endif %}>
                                {{ year }}å¹´
                            </option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label" style="color: #FF007F; font-weight: bold;">
                            <i class="bi bi-calendar-month"></i> æœˆä»½
                        </label>
                        <select id="monthSelect" class="form-select" style="background: #000000; color: #FFFFFF; border: 1px solid #322446;">
                            {% for month in months %}
                            <option value="{{ month }}" {% if month == current_month %}selected{% endif %}>
                                {{ month }}æœˆ
                            </option>
                            {% endfor %}
                        </select>
                    </div>
                </div>

                <!-- æŒ‰é’®ç»„ -->
                <div class="row">
                    <div class="col-md-6 mb-2">
                        <button id="viewMonthlyBtn" class="btn w-100" style="background: linear-gradient(135deg, #FF007F 0%, #C1006C 100%); color: white; border: none;">
                            <i class="bi bi-file-text"></i> æŸ¥çœ‹æœˆåº¦æŠ¥å‘Š
                        </button>
                    </div>
                    <div class="col-md-6 mb-2">
                        <button id="viewYearlyBtn" class="btn w-100" style="background: linear-gradient(135deg, #322446 0%, #4A3564 100%); color: white; border: none;">
                            <i class="bi bi-calendar3-range"></i> æŸ¥çœ‹å¹´åº¦æ±‡æ€»
                        </button>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- å¿«é€Ÿè¯´æ˜ -->
    <div class="row justify-content-center mt-4">
        <div class="col-lg-8">
            <div style="background: rgba(50, 36, 70, 0.2); border: 1px solid #322446; border-radius: 8px; padding: 20px;">
                <h6 style="color: #FF007F; margin-bottom: 15px;">
                    <i class="bi bi-info-circle"></i> æŠ¥å‘Šè¯´æ˜
                </h6>
                <div style="color: #FFFFFF; font-size: 0.9rem; line-height: 1.6;">
                    <p><strong style="color: #FF007F;">ğŸ“Š æœˆåº¦æ±‡æ€»æŠ¥å‘Š</strong> æ•´åˆè¯¥å®¢æˆ·æ‰€æœ‰ä¿¡ç”¨å¡çš„Supplieræ¶ˆè´¹ä¸ä»˜æ¬¾æƒ…å†µï¼š</p>
                    <ul>
                        <li><strong style="color: #FF007F;">Supplieræ¶ˆè´¹</strong>ï¼šè¯¥æœˆåœ¨æ‰€æœ‰ä¿¡ç”¨å¡ä¸Šçš„ä¾›åº”å•†æ¶ˆè´¹æ€»é¢</li>
                        <li><strong style="color: #FF007F;">æ‰‹ç»­è´¹(1%)</strong>ï¼šç³»ç»Ÿè‡ªåŠ¨è®¡ç®—çš„1%æœåŠ¡è´¹</li>
                        <li><strong style="color: #FF007F;">ä»˜æ¬¾è®°å½•</strong>ï¼šé€šè¿‡è½¬è´¦/è¿˜æ¬¾ä¸ºå®¢æˆ·æ”¯ä»˜çš„é‡‘é¢</li>
                        <li><strong style="color: #FF007F;">å‡€ä½™é¢</strong>ï¼šæ¶ˆè´¹+è´¹ç”¨-ä»˜æ¬¾çš„å¯¹è´¦ç»“æœ</li>
                    </ul>
                    <p class="mb-0" style="color: #FF007F;">
                        <i class="bi bi-check-circle"></i> æ¯æœˆåŠæ—¶æŸ¥çœ‹ï¼Œæ¸…æ¥šæ˜äº†ï¼Œé¿å…è¯¯ä¼šï¼
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const customerSelect = document.getElementById('customerSelect');
    const yearSelect = document.getElementById('yearSelect');
    const monthSelect = document.getElementById('monthSelect');
    const viewMonthlyBtn = document.getElementById('viewMonthlyBtn');
    const viewYearlyBtn = document.getElementById('viewYearlyBtn');

    // æŸ¥çœ‹æœˆåº¦æŠ¥å‘Š
    viewMonthlyBtn.addEventListener('click', function() {
        const customerId = customerSelect.value;
        const year = yearSelect.value;
        const month = monthSelect.value;

        if (!customerId) {
            alert('è¯·å…ˆé€‰æ‹©å®¢æˆ·');
            return;
        }

        window.location.href = `/monthly-summary/report/${customerId}/${year}/${month}`;
    });

    // æŸ¥çœ‹å¹´åº¦æ±‡æ€»
    viewYearlyBtn.addEventListener('click', function() {
        const customerId = customerSelect.value;
        const year = yearSelect.value;

        if (!customerId) {
            alert('è¯·å…ˆé€‰æ‹©å®¢æˆ·');
            return;
        }

        window.location.href = `/monthly-summary/yearly/${customerId}/${year}`;
    });
});
</script>
{% endblock %}

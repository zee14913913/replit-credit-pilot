{% extends "base.html" %}
{% block content %}
<h2>Validate Statement</h2>
<div class="alert alert-{{ 'success' if statement.validation_score > 0.8 else 'warning' }}">
    Validation Score: {{ "{:.0%}".format(statement.validation_score) }}
</div>
{% if inconsistencies %}
<div class="alert alert-danger">
    <h5>Inconsistencies Found:</h5>
    <ul>
    {% for issue in inconsistencies %}
        <li>{{ issue }}</li>
    {% endfor %}
    </ul>
</div>
{% endif %}
<h4>Transactions ({{ transactions|length }})</h4>
<table class="table table-striped">
    <thead><tr><th>Date</th><th>Description</th><th>Amount</th><th>Category</th></tr></thead>
    <tbody>
    {% for trans in transactions %}
    <tr>
        <td>{{ trans.transaction_date }}</td>
        <td>{{ trans.description }}</td>
        <td>RM {{ "{:.2f}".format(trans.amount) }}</td>
        <td><span class="badge bg-info">{{ trans.category }}</span></td>
    </tr>
    {% endfor %}
    </tbody>
</table>
<form method="POST" action="{{ url_for('confirm_statement', statement_id=statement.id) }}">
    <button type="submit" class="btn btn-success">Confirm Statement</button>
</form>
{% endblock %}

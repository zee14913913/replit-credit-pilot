{% extends "base.html" %}

{% block title %}{{ t('savings_account_management_center') }}{% endblock %}

{% block content %}
<div class="container-fluid" style="padding-top: 4rem; padding-bottom: 4rem; background: #000000;">
    
    <div class="row mb-4">
        <div class="col-12">
            <div style="background: linear-gradient(135deg, rgba(50, 36, 70, 0.3) 0%, rgba(0, 0, 0, 0.95) 100%); 
                        border: 2px solid #322446; 
                        border-radius: 15px; 
                        padding: 2rem 2.5rem; 
                        box-shadow: 0 0 30px rgba(50, 36, 70, 0.5);">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h1 style="color: #FFFEF0; text-shadow: 0 0 20px rgba(255,254,240,0.5); font-weight: 700; margin: 0; font-size: 2.2rem;">
                            <i class="bi bi-bank"></i> {{ t('savings_account_management_center') }}
                        </h1>
                        <p style="color: #999; margin: 0.5rem 0 0 0; font-size: 0.95rem;">{{ t('savings_account_management_dashboard') }}</p>
                    </div>
                    <div>
                        <a href="{{ url_for('savings_customers') }}" class="btn btn-sm" 
                           style="background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%); 
                                  border: 2px solid #FF007F; 
                                  color: #E8E8E8;
                                  padding: 0.6rem 1.5rem;
                                  font-weight: 600;">
                            <i class="bi bi-arrow-left"></i> {{ t('return_customer_list') }}
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row g-4 mb-4">
        <div class="col-md-3">
            <div class="stat-card">
                <div class="stat-icon" style="color: #FF007F;">
                    <i class="bi bi-people-fill"></i>
                </div>
                <div class="stat-info">
                    <h3 style="color: #FF007F; text-shadow: 0 0 15px rgba(255, 0, 127, 0.6); font-weight: 700; margin: 0; font-size: 2.5rem;">{{ total_customers }}</h3>
                    <p style="color: #FFFEF0; margin: 0; font-weight: 600; font-size: 0.9rem;">{{ t('auto_text_1155') }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="stat-card">
                <div class="stat-icon" style="color: #FF007F;">
                    <i class="bi bi-bank2"></i>
                </div>
                <div class="stat-info">
                    <h3 style="color: #FF007F; text-shadow: 0 0 15px rgba(255, 0, 127, 0.6); font-weight: 700; margin: 0; font-size: 2.5rem;">{{ total_accounts }}</h3>
                    <p style="color: #FFFEF0; margin: 0; font-weight: 600; font-size: 0.9rem;">{{ t('auto_text_1156') }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="stat-card">
                <div class="stat-icon" style="color: #FF007F;">
                    <i class="bi bi-file-earmark-text-fill"></i>
                </div>
                <div class="stat-info">
                    <h3 style="color: #FF007F; text-shadow: 0 0 15px rgba(255, 0, 127, 0.6); font-weight: 700; margin: 0; font-size: 2.5rem;">{{ total_statements }}</h3>
                    <p style="color: #FFFEF0; margin: 0; font-weight: 600; font-size: 0.9rem;">{{ t('auto_text_1157') }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="stat-card">
                <div class="stat-icon" style="color: #FF007F;">
                    <i class="bi bi-currency-dollar"></i>
                </div>
                <div class="stat-info">
                    <h3 style="color: #FF007F; text-shadow: 0 0 15px rgba(255, 0, 127, 0.6); font-weight: 700; margin: 0; font-size: 2.5rem;">{{ total_transactions }}</h3>
                    <p style="color: #FFFEF0; margin: 0; font-weight: 600; font-size: 0.9rem;">{{ t('auto_text_1158') }}</p>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-12">
            <div class="card galaxy-card" style="background: linear-gradient(135deg, rgba(15, 15, 15, 0.95) 0%, rgba(26, 26, 26, 0.95) 100%); border: 2px solid rgba(50, 36, 70, 0.5); border-radius: 15px; box-shadow: 0 0 30px rgba(50, 36, 70, 0.4);">
                <div class="card-header-custom" style="background: linear-gradient(135deg, rgba(50, 36, 70, 0.3) 0%, rgba(0, 0, 0, 0.95) 100%); border-bottom: 2px solid #FF007F;">
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 1.5rem;">
                        <h3 class="card-title-custom" style="color: #E8E8E8; font-weight: 700; margin: 0;">
                            <i class="bi bi-calendar3"></i> {{ t('all_savings_statements') }}（{{ t('sorted_by_month') }}）
                        </h3>
                        <span style="background: linear-gradient(135deg, #FF007F 0%, #E6007A 100%); color: #000; padding: 0.5rem 1rem; border-radius: 8px; font-weight: 700; font-size: 0.95rem;">
                            {{ statements|length }} {{ t('records') }}
                        </span>
                    </div>
                </div>
                <div class="card-body-custom" style="padding: 0;">
                    <div class="table-responsive">
                        <table class="table table-dark table-hover elegant-table" style="margin: 0; width: 100%; table-layout: auto;">
                            <thead style="background: rgba(50, 36, 70, 0.3); border-bottom: 2px solid #322446;">
                                <tr>
                                    <th style="font-size: 0.85rem; padding: 1rem 1.2rem; border-right: 1px solid rgba(255,255,255,0.1); color: #C0C0C0; white-space: nowrap;">{{ t('auto_text_906') }}</th>
                                    <th style="font-size: 0.85rem; padding: 1rem 1.2rem; border-right: 1px solid rgba(255,255,255,0.1); color: #C0C0C0; white-space: nowrap;">{{ t('auto_text_1160') }}</th>
                                    <th style="font-size: 0.85rem; padding: 1rem 1.2rem; border-right: 1px solid rgba(255,255,255,0.1); color: #C0C0C0; white-space: nowrap;">{{ t('auto_text_897') }}</th>
                                    <th style="font-size: 0.85rem; padding: 1rem 1.2rem; border-right: 1px solid rgba(255,255,255,0.1); color: #C0C0C0; white-space: nowrap;">{{ t('auto_text_1161') }}</th>
                                    <th style="font-size: 0.85rem; padding: 1rem 1.2rem; border-right: 1px solid rgba(255,255,255,0.1); color: #C0C0C0; white-space: nowrap;">{{ t('auto_text_1162') }}</th>
                                    <th style="font-size: 0.85rem; padding: 1rem 1.2rem; border-right: 1px solid rgba(255,255,255,0.1); color: #C0C0C0; white-space: nowrap;">{{ t('auto_text_1163') }}</th>
                                    <th style="font-size: 0.85rem; padding: 1rem 1.2rem; border-right: 1px solid rgba(255,255,255,0.1); color: #C0C0C0; white-space: nowrap;">{{ t('cc') }}</th>
                                    <th style="font-size: 0.85rem; padding: 1rem 1.2rem; border-right: 1px solid rgba(255,255,255,0.1); color: #C0C0C0; white-space: nowrap;">{{ t('auto_text_1164') }}</th>
                                    <th style="font-size: 0.85rem; padding: 1rem 1.2rem; text-align: center; color: #C0C0C0; white-space: nowrap;">{{ t('auto_text_342') }}</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% if statements %}
                                    {% for stmt in statements %}
                                    <tr class="hover-glow-row">
                                        <td style="font-size: 0.80rem; padding: 0.9rem 1.2rem; border-right: 1px solid rgba(255,255,255,0.05); font-weight: 700; color: #E8E8E8; white-space: nowrap;">{{ stmt['statement_date'][:7] }}</td>
                                        <td style="font-size: 0.80rem; padding: 0.9rem 1.2rem; border-right: 1px solid rgba(255,255,255,0.05); font-weight: 600; color: #E8E8E8; white-space: nowrap;">{{ stmt['customer_name'] }}</td>
                                        <td style="font-size: 0.80rem; padding: 0.9rem 1.2rem; border-right: 1px solid rgba(255,255,255,0.05); font-weight: 600; color: #E8E8E8; white-space: nowrap;">{{ stmt['bank_name'] }}</td>
                                        <td style="font-size: 0.80rem; padding: 0.9rem 1.2rem; border-right: 1px solid rgba(255,255,255,0.05); color: #FF007F; font-weight: 600; white-space: nowrap;">RM {{ "{:,.2f}".format(stmt['monthly_credit']) }}</td>
                                        <td style="font-size: 0.80rem; padding: 0.9rem 1.2rem; border-right: 1px solid rgba(255,255,255,0.05); color: #C0C0C0; white-space: nowrap;">RM {{ "{:,.2f}".format(stmt['monthly_debit']) }}</td>
                                        <td style="font-size: 0.80rem; padding: 0.9rem 1.2rem; border-right: 1px solid rgba(255,255,255,0.05); font-weight: 700; color: #E8E8E8; white-space: nowrap;">RM {{ "{:,.2f}".format(stmt['closing_bal'] if stmt['closing_bal'] else 0) }}</td>
                                        <td style="font-size: 0.80rem; padding: 0.9rem 1.2rem; border-right: 1px solid rgba(255,255,255,0.05); color: #C0C0C0; white-space: nowrap;">RM {{ "{:,.2f}".format(stmt['cc_sum_payment']) }}</td>
                                        <td style="font-size: 0.80rem; padding: 0.9rem 1.2rem; border-right: 1px solid rgba(255,255,255,0.05); color: #C0C0C0; white-space: nowrap;">RM {{ "{:,.2f}".format(stmt['total_transfer']) }}</td>
                                        <td style="font-size: 0.80rem; padding: 0.9rem 1.2rem; text-align: center; white-space: nowrap;">
                                            <a href="{{ url_for('savings_account_detail', account_id=stmt['savings_account_id']) }}" 
                                               class="btn btn-sm btn-view-details"
                                               style="background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%); 
                                                      border: 2px solid #FF007F; 
                                                      color: #E8E8E8;
                                                      font-weight: 600;
                                                      padding: 0.25rem 0.75rem;
                                                      font-size: 0.75rem;">
                                                <i class="bi bi-eye"></i> {{ t('view') }}
                                            </a>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                {% else %}
                                    <tr>
                                        <td colspan="9" style="text-align: center; padding: 3rem; color: #999;">
                                            {{ t('no_statement_data') }}
                                        </td>
                                    </tr>
                                {% endif %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<style>
.stat-card {
    background: linear-gradient(135deg, rgba(15, 15, 15, 0.95) 0%, rgba(26, 26, 26, 0.95) 100%);
    border: 2px solid rgba(50, 36, 70, 0.5);
    border-radius: 12px;
    padding: 2rem;
    display: flex;
    align-items: center;
    box-shadow: 0 0 20px rgba(50, 36, 70, 0.3);
    transition: all 0.3s ease;
}

.stat-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 0 30px rgba(255, 0, 127, 0.4);
    border-color: rgba(255, 0, 127, 0.5);
}

.stat-icon {
    font-size: 3rem;
    margin-right: 1.5rem;
}

.stat-info h3 {
    margin: 0;
}

.hover-glow-row {
    transition: all 0.3s ease;
}

.hover-glow-row:hover {
    background: rgba(50, 36, 70, 0.2) !important;
    box-shadow: 0 0 20px rgba(255, 0, 127, 0.2);
}

.btn-view-details:hover {
    background: linear-gradient(135deg, #2d2d2d 0%, #3d3d3d 100%) !important;
    border-color: #FF007F !important;
    box-shadow: 0 0 15px rgba(255, 0, 127, 0.5);
    transform: translateY(-2px);
}
</style>
{% endblock %}

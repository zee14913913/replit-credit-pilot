{% extends "base.html" %}

{% block title %}å‚¨è“„è´¦æˆ·æœˆç»“å• - åŒé‡äººå·¥éªŒè¯{% endblock %}

{% block content %}
<div class="container-fluid" style="background-color: #000000; min-height: 100vh; padding: 30px;">
    
    <!-- æ ‡é¢˜æ  -->
    <div class="row mb-4">
        <div class="col-12">
            <h2 style="color: #FF007F; font-weight: bold; border-bottom: 2px solid #322446; padding-bottom: 15px;">
                ğŸ” å‚¨è“„è´¦æˆ·æœˆç»“å• - åŒé‡äººå·¥éªŒè¯ç³»ç»Ÿ
            </h2>
        </div>
    </div>

    <!-- è´¦å•ä¿¡æ¯å¡ç‰‡ -->
    <div class="row mb-4">
        <div class="col-12">
            <div style="background-color: #000000; border: 1px solid #322446; border-radius: 8px; padding: 25px;">
                <h4 style="color: #FF007F; margin-bottom: 20px;">{{ t('__34') }}</h4>
                
                <div class="row">
                    <div class="col-md-3 mb-3">
                        <div style="color: #FFFEF0; opacity: 0.7; font-size: 12px;">{{ t('id_2') }}</div>
                        <div style="color: #FFFEF0; font-size: 16px; font-weight: bold;">{{ statement.id }}</div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div style="color: #FFFEF0; opacity: 0.7; font-size: 12px;">{{ t('auto_text_1121') }}</div>
                        <div style="color: #FFFEF0; font-size: 16px; font-weight: bold;">{{ statement.customer_name }}</div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div style="color: #FFFEF0; opacity: 0.7; font-size: 12px;">{{ t('auto_text_1122') }}</div>
                        <div style="color: #FFFEF0; font-size: 16px; font-weight: bold;">{{ statement.bank_name }} ****{{ statement.account_number_last4 }}</div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div style="color: #FFFEF0; opacity: 0.7; font-size: 12px;">{{ t('auto_text_933') }}</div>
                        <div style="color: #FFFEF0; font-size: 16px; font-weight: bold;">{{ statement.statement_date }}</div>
                    </div>
                </div>

                <div class="row mt-3">
                    <div class="col-md-3 mb-3">
                        <div style="color: #FFFEF0; opacity: 0.7; font-size: 12px;">{{ t('auto_text_1123') }}</div>
                        <div style="color: #FF007F; font-size: 18px; font-weight: bold;">{{ statement.total_transactions }} ç¬”</div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div style="color: #FFFEF0; opacity: 0.7; font-size: 12px;">{{ t('auto_text_1124') }}</div>
                        <div>
                            {% if statement.verification_status == 'verified' %}
                                <span style="color: #FF007F; font-size: 16px; font-weight: bold;">{{ t('__35') }}</span>
                            {% else %}
                                <span style="color: #FF007F; font-size: 16px; font-weight: bold;">{{ t('__36') }}</span>
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <div style="color: #FFFEF0; opacity: 0.7; font-size: 12px;">{{ t('pdf') }}</div>
                        <div style="color: #322446; font-size: 12px; font-family: monospace;">static/uploads/{{ statement.file_path }}</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- éªŒè¯æ­¥éª¤æŒ‡å¼• -->
    <div class="row mb-4">
        <div class="col-12">
            <div style="background-color: #000000; border: 2px solid #FF007F; border-radius: 8px; padding: 25px;">
                <h4 style="color: #FF007F; margin-bottom: 20px;">{{ t('__37') }}</h4>
                
                <div style="color: #FFFEF0; line-height: 1.8;">
                    <p style="margin-bottom: 15px; font-size: 14px; color: #FF007F; font-weight: bold;">
                        âš ï¸ {{ t('pdf_6') }}åŸä»¶100%ä¸€è‡´ï¼Œä¸€å­—ä¸å·®ï¼
                    </p>
                    
                    <div style="margin-bottom: 20px;">
                        <div style="color: #FF007F; font-weight: bold; margin-bottom: 10px;">{{ t('auto_text_1129') }}</div>
                        <ol style="margin-left: 20px;">
                            <li>{{ t('pdf_1') }}<code style="color: #322446; background-color: #FFFEF0; padding: 2px 6px; border-radius: 3px;">static/uploads/{{ statement.file_path }}</code></li>
                            <li>ä»ç¬¬1ç¬”äº¤æ˜“å¼€å§‹ï¼Œé€è¡Œå¯¹æ¯”ä¸‹æ–¹è¡¨æ ¼ï¼š
                                <ul style="margin-left: 20px; margin-top: 5px;">
                                    <li>{{ t('auto_text_1131') }}</li>
                                    <li>{{ t('auto_text_1132') }}</li>
                                    <li>{{ t('100') }}</li>
                                    <li>{{ t('auto_text_1134') }}</li>
                                    <li>{{ t('crdr_1') }}</li>
                                    <li>{{ t('auto_text_1135') }}</li>
                                </ul>
                            </li>
                            <li>{{ t('auto_text_1136') }}<strong style="color: #FF007F;">{{ t('1__1') }}</strong></li>
                        </ol>
                    </div>

                    <div style="margin-bottom: 20px;">
                        <div style="color: #FF007F; font-weight: bold; margin-bottom: 10px;">{{ t('auto_text_1138') }}</div>
                        <ol style="margin-left: 20px;">
                            <li>{{ t('5') }}</li>
                            <li>{{ t('1_4') }}</li>
                            <li>{{ t('auto_text_1141') }}</li>
                            <li>{{ t('auto_text_1136') }}<strong style="color: #FF007F;">{{ t('2__1') }}</strong></li>
                        </ol>
                    </div>

                    <div>
                        <div style="color: #FF007F; font-weight: bold; margin-bottom: 10px;">{{ t('auto_text_1143') }}</div>
                        <p style="margin-left: 20px;">{{ t('auto_text_1144') }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- äº¤æ˜“è®°å½•å¯¹æ¯”è¡¨ -->
    <div class="row mb-4">
        <div class="col-12">
            <div style="background-color: #000000; border: 1px solid #322446; border-radius: 8px; padding: 25px;">
                <h4 style="color: #FF007F; margin-bottom: 20px;">{{ t('_pdf_1') }}</h4>
                
                <div class="table-responsive">
                    <table class="table table-dark table-hover" style="margin-bottom: 0;">
                        <thead>
                            <tr style="background-color: #322446; border-bottom: 2px solid #FF007F;">
                                <th style="color: #FFFEF0; text-align: center; width: 50px;">{{ t('auto_text_513') }}</th>
                                <th style="color: #FFFEF0; text-align: left; width: 120px;">{{ t('auto_text_514') }}</th>
                                <th style="color: #FFFEF0; text-align: left;">{{ t('description_1') }}</th>
                                <th style="color: #FFFEF0; text-align: center; width: 60px;">{{ t('auto_text_1145') }}</th>
                                <th style="color: #FFFEF0; text-align: right; width: 130px;">{{ t('amount_1') }}</th>
                                <th style="color: #FFFEF0; text-align: right; width: 150px;">{{ t('balance_1') }}</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for txn in transactions %}
                            <tr style="border-bottom: 1px solid #322446;">
                                <td style="color: #FFFEF0; text-align: center; font-weight: bold;">{{ loop.index }}</td>
                                <td style="color: #FFFEF0; text-align: left;">{{ txn.transaction_date }}</td>
                                <td style="color: #FFFEF0; text-align: left; max-width: 400px; word-wrap: break-word;">
                                    {{ txn.description }}
                                </td>
                                <td style="text-align: center;">
                                    {% if txn.transaction_type == 'credit' %}
                                        <span style="color: #FF007F; font-weight: bold;">{{ t('cr') }}</span>
                                    {% else %}
                                        <span style="color: #FFFEF0; font-weight: bold;">{{ t('dr') }}</span>
                                    {% endif %}
                                </td>
                                <td style="text-align: right;">
                                    {% if txn.transaction_type == 'credit' %}
                                        <span style="color: #FF007F; font-weight: bold;">RM {{ "%.2f"|format(txn.amount) }}</span>
                                    {% else %}
                                        <span style="color: #FFFEF0; font-weight: bold;">RM {{ "%.2f"|format(txn.amount) }}</span>
                                    {% endif %}
                                </td>
                                <td style="color: #FFFEF0; text-align: right; font-weight: bold;">
                                    RM {{ "%.2f"|format(txn.balance if txn.balance else 0) }}
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- è´¢åŠ¡æ±‡æ€» -->
    <div class="row mb-4">
        <div class="col-12">
            <div style="background-color: #000000; border: 2px solid #FF007F; border-radius: 8px; padding: 25px;">
                <h4 style="color: #FF007F; margin-bottom: 20px;">{{ t('__38') }}</h4>
                
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <div style="color: #FFFEF0; opacity: 0.7; font-size: 14px;">{{ t('total_credit_') }}</div>
                        <div style="color: #FF007F; font-size: 24px; font-weight: bold;">RM {{ "%.2f"|format(statement.total_credit) }}</div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div style="color: #FFFEF0; opacity: 0.7; font-size: 14px;">{{ t('total_debit_') }}</div>
                        <div style="color: #FFFEF0; font-size: 24px; font-weight: bold;">RM {{ "%.2f"|format(statement.total_debit) }}</div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div style="color: #FFFEF0; opacity: 0.7; font-size: 14px;">{{ t('closing_balance') }}</div>
                        <div style="color: #FF007F; font-size: 24px; font-weight: bold;">RM {{ "%.2f"|format(statement.closing_balance) }}</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- éªŒè¯æŒ‰é’®åŒºåŸŸ -->
    <div class="row mb-4">
        <div class="col-12 text-center">
            {% if statement.verification_status != 'verified' %}
            <form action="{{ url_for('mark_savings_verified', statement_id=statement.id) }}" method="POST" onsubmit="return confirmVerification();">
                <button type="submit" class="btn btn-lg" style="background-color: #FF007F; color: #000000; border: none; padding: 15px 50px; font-size: 18px; font-weight: bold; border-radius: 8px;">
                    âœ… ç¡®è®¤éªŒè¯å®Œæˆï¼ˆåŒé‡éªŒè¯å·²å®Œæˆï¼‰
                </button>
            </form>
            <p style="color: #FFFEF0; margin-top: 15px; opacity: 0.7;">
                ç‚¹å‡»å‰è¯·ç¡®ä¿å·²å®Œæˆç¬¬ä¸€éå’Œç¬¬äºŒéäººå·¥éªŒè¯
            </p>
            {% else %}
            <div style="color: #FF007F; font-size: 20px; font-weight: bold;">
                âœ… æ­¤è´¦å•å·²éªŒè¯å®Œæˆï¼æ•°æ®å·²ç¡®è®¤100%å‡†ç¡®ã€‚
            </div>
            <p style="color: #FFFEF0; margin-top: 15px; opacity: 0.7;">
                éªŒè¯æ—¶é—´ï¼š{{ statement.verified_at }}
            </p>
            {% endif %}

            <a href="{{ url_for('savings_customers') }}" class="btn btn-secondary btn-lg mt-3" style="padding: 15px 50px; font-size: 18px; border-radius: 8px;">
                è¿”å›å®¢æˆ·åˆ—è¡¨
            </a>
        </div>
    </div>

</div>

<script>
function confirmVerification() {
    return confirm('âš ï¸ {{ t('nnn_n_n_pdf10') }}0%ä¸€è‡´\n\nç‚¹å‡»"ç¡®å®š"æ ‡è®°ä¸ºå·²éªŒè¯ã€‚');
}
</script>

{% endblock %}

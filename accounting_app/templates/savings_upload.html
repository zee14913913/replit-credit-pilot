{% extends "base.html" %}
{% block title %}Savings Â· Upload{% endblock %}
{% block content %}
<div class="page"><div class="main">
  <h1 class="title">Upload Savings Statement</h1>
  <div class="grid-auto">
    <div class="card">
      <h2 class="section">Upload PDF/CSV</h2>
      <form id="u" enctype="multipart/form-data">
        <input class="input" type="file" name="file" accept=".pdf,.csv,application/pdf,text/csv">
        <button class="btn primary">Upload & Parse</button>
      </form>
      <pre id="out" class="meta" style="margin-top:8px;"></pre>
    </div>
  </div>
</div></div>
<script>
document.getElementById('u').addEventListener('submit', async (e)=>{
  e.preventDefault();
  const fd = new FormData(e.target);
  const r = await fetch('/savings/upload',{method:'POST',body:fd});
  document.getElementById('out').textContent = JSON.stringify(await r.json(),null,2);
});
</script>
{% endblock %}

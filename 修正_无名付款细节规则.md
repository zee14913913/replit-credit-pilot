# æ— åä»˜æ¬¾åˆ†ç±»è§„åˆ™ä¿®æ­£

## ğŸ“‹ ç”¨æˆ·æ¾„æ¸…çš„è§„åˆ™

### åŸè§„åˆ™ï¼ˆä¸å¤Ÿç²¾ç¡®ï¼‰
```
æ— åä»˜æ¬¾ â†’ Owner's Payment
```

### æ–°è§„åˆ™ï¼ˆæ­£ç¡®å®Œæ•´ï¼‰
```
1. æ— åä»˜æ¬¾ + æ— details â†’ Owner's Payment
2. æ— åä»˜æ¬¾ + æœ‰details (payment on behalf client, client requestç­‰) â†’ GZ's Payment
```

---

## ğŸ”§ ä¿®æ­£å®ç°

### ä»£ç é€»è¾‘

**æ–‡ä»¶**: `services/ledger_classifier.py`

```python
def classify_payment(description, customer_id):
    # 1. å®Œå…¨ç©ºçš„æè¿° â†’ Owner's Payment
    if not description or description.strip() == '':
        return 'customer'
    
    # 2. æ£€æŸ¥æ˜¯å¦åŒ…å«GZä»£å®¢æˆ·ä»˜æ¬¾çš„å…³é”®è¯
    gz_payment_keywords = [
        'on behalf',
        'behalf of', 
        'for client',
        'client request',
        'payment for',
        'on behalf of client',
        'payment on behalf'
    ]
    
    for keyword in gz_payment_keywords:
        if keyword in description.lower():
            return 'infinite'  # GZä»£å®¢æˆ·ä»˜æ¬¾
    
    # 3. æ£€æŸ¥å®¢æˆ·åå­—
    if customer_id in self.payer_aliases:
        # ä¼˜å…ˆæ£€æŸ¥å®¢æˆ·æœ¬å
        for alias in self.payer_aliases[customer_id]['customer']:
            if alias in description.lower():
                return 'customer'
        
        # æ£€æŸ¥å…¬å¸å
        for alias in self.payer_aliases[customer_id]['company']:
            if alias in description.lower():
                return 'company'
    
    # 4. é»˜è®¤ä¸ºINFINITEä»˜æ¬¾
    return 'infinite'
```

---

## ğŸ“Š åˆ†ç±»ç¤ºä¾‹

| ä»˜æ¬¾æè¿° | åˆ†ç±»ç»“æœ | åŸå›  |
|---------|---------|------|
| (ç©ºç™½) | **Owner's Payment** | æ— åä»˜æ¬¾ + æ— details |
| "" | **Owner's Payment** | æ— åä»˜æ¬¾ + æ— details |
| "PAYMENT ON BEHALF OF CLIENT" | **GZ's Payment** | æœ‰details: "on behalf" |
| "CLIENT REQUEST PAYMENT" | **GZ's Payment** | æœ‰details: "client request" |
| "PAYMENT FOR CLIENT ABC" | **GZ's Payment** | æœ‰details: "for client" |
| "PAYMENT BY CHANG CHOON CHOW" | **Owner's Payment** | æœ‰å®¢æˆ·åå­— |
| "PAYMENT BY KENG CHOW SDN BHD" | **Owner's Payment** | æœ‰å®¢æˆ·å…¬å¸å |
| "PAYMENT FROM ACCOUNT 1234" | **GZ's Payment** | æ— å®¢æˆ·å + æ— ç‰¹æ®Šdetails |

---

## âœ… å…³é”®è¯åˆ—è¡¨

**GZä»£å®¢æˆ·ä»˜æ¬¾å…³é”®è¯**:
1. `on behalf`
2. `behalf of`
3. `for client`
4. `client request`
5. `payment for`
6. `on behalf of client`
7. `payment on behalf`

---

## ğŸ¯ è§„åˆ™æ€»ç»“

### Owner's Paymentï¼ˆå®¢æˆ·ä»˜æ¬¾ï¼‰
- âœ… å®Œå…¨æ— æè¿°ï¼ˆç©ºç™½/ç©ºå­—ç¬¦ä¸²ï¼‰
- âœ… æè¿°åŒ…å«å®¢æˆ·æœ¬å
- âœ… æè¿°åŒ…å«å®¢æˆ·å…¬å¸å

### GZ's Paymentï¼ˆINFINITEä»˜æ¬¾ï¼‰
- âœ… æè¿°åŒ…å«"on behalf", "for client", "client request"ç­‰å…³é”®è¯
- âœ… æè¿°åŒ…å«GZ BANK LISTä»»ä½•é“¶è¡Œåç§°
- âœ… æ— å®¢æˆ·å + æ— ç‰¹æ®Šdetailsçš„å…¶ä»–ä»˜æ¬¾

---

**ä¿®æ­£æ—¶é—´**: 2025-11-16  
**ä¿®æ­£çŠ¶æ€**: âœ… å·²å®Œæˆ
